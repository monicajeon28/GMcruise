# νΈλμ­μ… μ²λ¦¬ μμ • μ™„λ£ λ³΄κ³ μ„

> **μ‘μ„±μΌ**: 2025λ…„ 1μ›” 28μΌ  
> **μμ • λ‚΄μ©**: νΈλμ­μ… ν΄λΌμ΄μ–ΈνΈ μ „λ‹¬ λ¬Έμ  μμ •

---

## π”΄ λ°κ²¬λ λ¬Έμ 

### νΈλμ­μ… ν΄λΌμ΄μ–ΈνΈ λ―Έμ „λ‹¬ λ¬Έμ 

**λ¬Έμ μ **:
- `autoSetupAffiliateProfile` ν•¨μκ°€ `prisma`λ¥Ό μ§μ ‘ μ‚¬μ©
- νΈλμ­μ… λ‚΄μ—μ„ νΈμ¶ν•΄λ„ νΈλμ­μ… λ°–μ—μ„ μ‹¤ν–‰λ¨
- μλ™ μ„¤μ •μ΄ μ‹¤ν¨ν•΄λ„ νΈλμ­μ…μ΄ λ΅¤λ°±λμ§€ μ•μ

**μ›μΈ**:
- Prismaλ” νΈλμ­μ… ν΄λΌμ΄μ–ΈνΈ(`tx`)λ¥Ό λ…μ‹μ μΌλ΅ μ „λ‹¬ν•΄μ•Ό κ°™μ€ νΈλμ­μ…μ„ μ‚¬μ©ν•¨
- `prisma`λ¥Ό μ§μ ‘ μ‚¬μ©ν•λ©΄ ν•­μƒ μƒλ΅μ΄ μ—°κ²°μ„ μ‚¬μ©

---

## β… μμ • μ™„λ£

### 1. `autoSetupAffiliateProfile` ν•¨μ μμ •

**μμ • μ „**:
```typescript
export async function autoSetupAffiliateProfile(profileId: number) {
  // ...
  const profile = await prisma.affiliateProfile.findUnique({ ... });
  // ...
}
```

**μμ • ν›„**:
```typescript
export async function autoSetupAffiliateProfile(
  profileId: number,
  tx?: Omit<Prisma.TransactionClient, '$connect' | '$disconnect' | '$on' | '$transaction' | '$use' | '$extends'>
) {
  const db = tx || prisma;
  // ...
  const profile = await db.affiliateProfile.findUnique({ ... });
  // ...
}
```

### 2. λ¨λ“  ν•μ„ ν•¨μ μμ •

- `createDefaultAffiliateLink`: `db` νλΌλ―Έν„° μ¶”κ°€
- `createDefaultCustomerGroup`: `db` νλΌλ―Έν„° μ¶”κ°€
- `createDefaultLandingPage`: `db` νλΌλ―Έν„° μ¶”κ°€

λ¨λ“  `prisma` μ‚¬μ©μ„ `db`λ΅ λ³€κ²½ν•μ—¬ νΈλμ­μ… ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‚¬μ©ν•λ„λ΅ μμ •

### 3. νΈμ¶λ¶€ μμ •

**μμ • μ „**:
```typescript
const autoSetupResult = await autoSetupAffiliateProfile(created.id);
```

**μμ • ν›„**:
```typescript
const autoSetupResult = await autoSetupAffiliateProfile(created.id, tx);
```

---

## π“ μμ • ν¨κ³Ό

### λ°μ΄ν„° μΌκ΄€μ„±
- β… **μ΄μ „**: μλ™ μ„¤μ •μ΄ νΈλμ­μ… λ°–μ—μ„ μ‹¤ν–‰λμ–΄ μ‹¤ν¨ν•΄λ„ λ΅¤λ°± μ• λ¨
- β… **μ΄ν›„**: μλ™ μ„¤μ •μ΄ νΈλμ­μ… λ‚΄μ—μ„ μ‹¤ν–‰λμ–΄ μ‹¤ν¨ μ‹ μ „μ²΄ λ΅¤λ°±

### νΈλμ­μ… λ²”μ„
- β… **μ΄μ „**: ν”„λ΅ν•„ μƒμ„±λ§ νΈλμ­μ… λ‚΄μ—μ„ μ‹¤ν–‰
- β… **μ΄ν›„**: ν”„λ΅ν•„ μƒμ„± + κ΄€κ³„ μ„¤μ • + μλ™ μ„¤μ • λ¨λ‘ νΈλμ­μ… λ‚΄μ—μ„ μ‹¤ν–‰

---

## π” κ²€μ¦ μ™„λ£

### νƒ€μ… μ•μ •μ„±
- β… νƒ€μ… μ •μ μ •ν™•ν•¨
- β… μ„ νƒμ  νλΌλ―Έν„°λ΅ κΈ°μ΅΄ νΈμ¶ μ½”λ“μ™€ νΈν™

### λ¦°ν„° κ²€μ‚¬
- β… λ¦°ν„° μ¤λ¥ μ—†μ

### νΈμ¶ μ„μΉ ν™•μΈ
- β… `app/api/admin/affiliate/profiles/route.ts`μ—μ„λ§ μ‚¬μ©
- β… λ¨λ“  νΈμ¶ μ„μΉμ— νΈλμ­μ… ν΄λΌμ΄μ–ΈνΈ μ „λ‹¬

---

## π― μµμΆ… κ²°λ΅ 

### μμ • μ™„λ£
- β… νΈλμ­μ… ν΄λΌμ΄μ–ΈνΈ μ „λ‹¬ λ¬Έμ  μμ •
- β… λ¨λ“  ν•μ„ ν•¨μ μμ •
- β… νΈμ¶λ¶€ μμ •

### κ²€μ¦ μ™„λ£
- β… νƒ€μ… μ¤λ¥ μ—†μ
- β… λ¦°ν„° μ¤λ¥ μ—†μ
- β… νΈμ¶ μ„μΉ ν™•μΈ μ™„λ£

### λ°°ν¬ μ¤€λΉ„ μƒνƒ
**λ¨λ“  μμ •μ‚¬ν•­μ΄ μ™„λ£λμ—κ³  κ²€μ¦λμ—μµλ‹λ‹¤. μ΄μ  νΈλμ­μ…μ΄ μ λ€λ΅ μ‘λ™ν•©λ‹λ‹¤.**

---

**μ‘μ„±μ**: AI Assistant  
**μµμΆ… μ—…λ°μ΄νΈ**: 2025λ…„ 1μ›” 28μΌ

