# 구글 드라이브 및 캘린더 연동 설정 가이드

## 개요

화상 회의 시스템에 구글 드라이브(녹화 저장)와 구글 캘린더(예약 연동) 기능이 추가되었습니다.

## 구현된 기능

### ✅ 완료된 기능

1. **구글 드라이브 연동**
   - OAuth 2.0 인증
   - 녹화 파일 자동 업로드
   - 사용자별 드라이브 저장

2. **녹화 기능**
   - 조용한 녹화 (상대방이 모르게)
   - 호스트만 녹화 가능
   - 자동 구글 드라이브 업로드

3. **가상 배경**
   - 배경 이미지 선택
   - 실시간 배경 변경

4. **대기실 (Waiting Room)**
   - 호스트 승인 후 입장
   - 대기 중인 참가자 목록

5. **구글 캘린더 연동**
   - 미팅 예약 시 자동 캘린더 추가
   - 알림 설정

6. **참가자 수 최적화**
   - 기본값: 10명 (최적 성능)
   - 권장 최대: 20명
   - 최대: 50명

## 설정 방법

### 1. 구글 클라우드 콘솔 설정

1. [Google Cloud Console](https://console.cloud.google.com/) 접속
2. 새 프로젝트 생성 또는 기존 프로젝트 선택
3. **API 및 서비스 > 사용자 인증 정보** 이동
4. **OAuth 2.0 클라이언트 ID 만들기**
   - 애플리케이션 유형: 웹 애플리케이션
   - 승인된 리디렉션 URI: `https://yourdomain.com/api/google/callback`
5. **API 및 서비스 > 라이브러리**에서 다음 API 활성화:
   - Google Drive API
   - Google Calendar API

### 2. 환경 변수 설정

`.env.local` 파일에 추가:

```bash
# 구글 OAuth 설정
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-client-secret
GOOGLE_REDIRECT_URI=https://yourdomain.com/api/google/callback

# 기본 URL
NEXT_PUBLIC_BASE_URL=https://yourdomain.com
```

### 3. 데이터베이스 마이그레이션

```bash
npx prisma migrate dev --name add_google_integration
npx prisma generate
```

## 사용 방법

### 구글 드라이브 연동

1. 대시보드에서 "구글 드라이브 연동" 버튼 클릭
2. 구글 계정 선택 및 권한 승인
3. 연동 완료 후 녹화 파일이 자동으로 드라이브에 저장됨

### 녹화 기능

- **자동 녹화**: 호스트가 미팅에 입장하면 자동으로 녹화 시작
- **조용한 녹화**: 참가자에게 알림 없이 녹화 진행
- **자동 저장**: 미팅 종료 시 구글 드라이브에 자동 업로드

### 가상 배경

1. 미팅 중 "가상 배경" 버튼 클릭
2. 원하는 배경 이미지 선택
3. 실시간으로 배경 변경

### 대기실

1. 미팅 생성 시 "대기실 사용" 옵션 활성화
2. 참가자가 링크로 접속 시 대기실에서 대기
3. 호스트가 "승인" 버튼으로 입장 허용

### 구글 캘린더 연동

1. 미팅 예약 시 "구글 캘린더에 추가" 옵션 선택
2. 구글 계정 연동 (최초 1회)
3. 자동으로 캘린더에 이벤트 생성 및 알림 설정

## 참가자 수 권장 설정

### 최적 성능 (권장)
- **10명**: 브라우저 성능 최적화
- **네트워크**: 약 10-20 Mbps
- **CPU 사용률**: 낮음

### 권장 최대
- **20명**: 일반적인 사용에 적합
- **네트워크**: 약 20-40 Mbps
- **CPU 사용률**: 보통

### 최대
- **50명**: 가능하나 성능 저하 가능
- **네트워크**: 약 50-100 Mbps
- **CPU 사용률**: 높음

## 비용

### 구글 드라이브
- **무료**: 15GB 저장 공간
- **추가 저장**: Google One 구독 필요
- **업로드**: 무료 (제한 없음)

### 구글 캘린더
- **완전 무료**: 제한 없음

## 보안

1. **OAuth 토큰**: 암호화하여 저장 (구현 필요)
2. **비밀번호**: 해시 처리
3. **녹화 파일**: 사용자 본인만 접근 가능

## 문제 해결

### 구글 인증 실패
- 리디렉션 URI 확인
- 클라이언트 ID/Secret 확인
- API 활성화 확인

### 녹화 파일 업로드 실패
- 구글 드라이브 권한 확인
- 저장 공간 확인
- 네트워크 연결 확인

### 캘린더 연동 실패
- Google Calendar API 활성화 확인
- 권한 확인

## 다음 단계

1. 토큰 암호화 저장 구현
2. 녹화 품질 설정 옵션
3. 배경 이미지 커스터마이징
4. 대기실 자동 승인 옵션







