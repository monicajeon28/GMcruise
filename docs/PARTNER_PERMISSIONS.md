# 파트너 권한 가이드

## 역할 구분

### 대리점장 (BRANCH_MANAGER)
- **아이디 형식**: `boss1`, `boss2`, `boss3...`
- **비밀번호**: `1101` (초기 비밀번호)
- **헤더 색상**: 보라색 그라데이션

### 판매원 (SALES_AGENT)
- **아이디 형식**: `user1`, `user2`, `user3...`
- **비밀번호**: `1101` (초기 비밀번호)
- **헤더 색상**: 파란색 그라데이션

## 권한 차이

### 대리점장 전용 기능
1. **팀 관리** (`/partner/boss1/team`)
   - 소속 판매원 목록 조회
   - 판매원 실적 확인
   - 판매원 수당 요약
   - 판매원 초대 (계약서 보내기)

2. **계약서 보내기**
   - 판매원 계약서 발송
   - 계약서 초대 링크 생성

3. **팀 통계**
   - 전체 팀원 수 확인
   - 팀 전체 판매 실적 조회

### 판매원 전용 기능
1. **개인 실적 관리**
   - 본인의 링크 관리
   - 본인의 고객 관리
   - 본인의 판매 기록

2. **제한 사항**
   - 팀 관리 페이지 접근 불가
   - 다른 판매원 정보 조회 불가
   - 계약서 보내기 불가

### 공통 기능
1. **대시보드**
   - 개인 통계 확인
   - 최근 리드/판매 확인
   - 빠른 메뉴 접근

2. **고객 관리**
   - 리드 생성/수정
   - 고객 상담 기록
   - 여권 요청 관리

3. **링크 관리**
   - 판매몰 링크 생성
   - 결제 링크 생성
   - 대시보드 링크 생성

4. **결제/정산**
   - 판매 기록 확인
   - 수당 내역 조회
   - 지급명세서 확인

5. **프로필 관리**
   - 프로필 정보 수정
   - 비밀번호 변경
   - 아이디는 수정 불가

## 접근 제어

### API 레벨 권한 체크
- 모든 파트너 API는 `requirePartnerContext()` 사용
- 역할별 접근 제어는 각 API에서 구현

### 페이지 레벨 권한 체크
- 팀 관리 페이지: `BRANCH_MANAGER`만 접근 가능
- 판매원이 접근 시도 시 대시보드로 리다이렉트

### UI 레벨 권한 체크
- 대시보드에서 역할별 메뉴 표시
- 대리점장 전용 버튼은 판매원에게 비활성화

## 로그인 방법

### 대리점장
```
아이디: boss1 (또는 boss2, boss3...)
비밀번호: 1101
```

### 판매원
```
아이디: user1 (또는 user2, user3...)
비밀번호: 1101
```

## 계약서 승인 시 자동 생성

1. **대리점장 계약서 승인**
   - `invitedByProfileId`가 없으면 `BRANCH_MANAGER`로 생성
   - 아이디: `boss1`, `boss2`... 자동 생성
   - 비밀번호: `1101`로 설정

2. **판매원 계약서 승인**
   - `invitedByProfileId`가 있으면 `SALES_AGENT`로 생성
   - 아이디: `user1`, `user2`... 자동 생성
   - 비밀번호: `1101`로 설정

## 보안 주의사항

1. **아이디 수정 불가**: 판매원 대시보드에서 아이디는 `disabled` 처리
2. **비밀번호 변경 가능**: 프로필 페이지에서 비밀번호 변경 가능
3. **권한 체크**: 모든 민감한 작업은 서버 사이드에서 권한 확인







