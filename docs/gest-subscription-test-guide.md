# Gest 정액제 판매원 테스트 가이드

## 📋 목차
1. [수당 설정 방법](#1-수당-설정-방법)
2. [Gest 계정 생성 및 테스트](#2-gest-계정-생성-및-테스트)
3. [매출 결과 확인](#3-매출-결과-확인)
4. [정산 확인](#4-정산-확인)

---

## 1. 수당 설정 방법

### 1-1. 관리자 패널 접근

#### 접근 경로
```
관리자 패널 → 어필리에이트 → 어필리에이트 수당
또는
/admin/affiliate/products
```

### 1-2. 상품 선택 및 수당 설정

#### 단계
1. 관리자 패널 → **어필리에이트** 섹션 → **어필리에이트 수당** 클릭
2. 상품 목록에서 수당을 설정할 상품 선택
3. 상품 상세 페이지에서 **수당 티어(Commission Tier)** 설정
4. **판매원 수당(Sales Commission)** 입력:
   - 판매원 수당 필드: `salesShareAmount`
   - 수당 금액 입력 (정액제 판매원도 이 수당을 사용)
   - 예: `salesShareAmount: 100000` (10만원)
   - **참고**: Gest 계정(정액제 판매원)은 일반 판매원과 동일한 `salesShareAmount` 수당을 사용합니다.

### 1-3. 수당 설정 확인

#### 확인 사항
- ✅ 상품에 `AffiliateCommissionTier`가 설정되어 있는지 확인
- ✅ `salesShareAmount > 0` 인지 확인
- ✅ **정액제 판매원(Gest)은 일반 판매원과 동일한 `salesShareAmount` 수당을 사용**하므로, 판매원 수당이 설정되어 있으면 Gest 계정의 개인몰에도 상품이 표시됩니다.

### 1-4. Gest 계정 개인몰 확인

#### 확인 방법
1. Gest 계정으로 로그인: `gest1` / `zxc1`
2. 개인몰 접근: `/{mallUserId}/shop` (예: `/gest1/shop`)
3. **수당이 설정된 경우**: 상품이 정상적으로 표시됨 ✅
4. **수당이 설정되지 않은 경우**: "상품 준비 중" 메시지 표시 ❌

---

## 2. Gest 계정 생성 및 테스트

### 2-1. 테스트 계정 생성

#### 접근 경로
```
관리자 패널 → 어필리에이트 → 정액제 판매원
또는
/admin/subscription
```

#### 단계
1. 관리자 패널 접근
2. **어필리에이트** 섹션 → **정액제 판매원** 클릭
3. 상단의 **"테스트 계정 생성 (gest1, gest2, ...)"** 버튼 클릭
4. 생성할 계정 수 입력 (예: `1`)
5. 확인 클릭

#### 생성되는 계정 정보
- **아이디**: gest1, gest2, gest3... (자동 증가)
- **비밀번호**: zxc1 (모든 테스트 계정 동일)
- **상태**: 무료 체험 중 (7일)
- **기능**: 30% 기능만 사용 가능

### 2-2. Gest 계정으로 로그인

#### 접근 경로
```
로그인 페이지
```

#### 로그인 정보
- **아이디**: gest1 (또는 gest2, gest3...)
- **비밀번호**: zxc1
- **모드**: 파트너 모드 (또는 일반 로그인)

#### 확인 사항
- ✅ 로그인 성공
- ✅ 대시보드 상단에 "🎁 무료 체험 중 (30% 기능) (X일 남음)" 배지 표시
- ✅ 튜토리얼 모달 자동 표시 (첫 로그인 시)

### 2-3. 개인몰 확인

#### 접근 경로
```
/gest1/shop
또는
로그인 후 "내 개인몰" 링크 클릭
```

#### 확인 사항
- **수당이 설정된 경우**:
  - ✅ 상품 목록이 정상적으로 표시됨
  - ✅ 링크 생성 가능
  - ✅ 판매 확정 가능

- **수당이 설정되지 않은 경우**:
  - ❌ "상품 준비 중" 메시지 표시
  - ❌ "수당이 설정되면 상품이 표시됩니다." 안내

---

## 3. 매출 결과 확인

### 3-1. 관리자 패널에서 확인

#### 방법 1: 정액제 판매원 관리 페이지
```
관리자 패널 → 어필리에이트 → 정액제 판매원
/admin/subscription
```

**확인 가능한 정보**:
- 계정 목록 및 상태
- 무료 체험/정액제 구독 상태
- 계약 기간 및 남은 일수

#### 방법 2: 판매원 대시보드
```
관리자 패널 → 어필리에이트 → 판매원 대시보드
/admin/affiliate/agent-dashboard
```

**확인 가능한 정보**:
- 판매원별 매출 통계
- 판매 건수 및 금액
- 수당 내역

#### 방법 3: 판매 확정 승인 페이지
```
관리자 패널 → 어필리에이트 → 판매 확정 승인
/admin/affiliate/sales-confirmation/pending
```

**확인 가능한 정보**:
- 대기 중인 판매 확정 요청
- 승인/거부 처리

#### 방법 4: 어필리에이트 판매 관리
```
관리자 패널 → 어필리에이트 → 판매 관리
(API: /api/admin/affiliate/sales)
```

**확인 가능한 정보**:
- 전체 판매 목록
- 판매원별 필터링
- 판매 상태 (PENDING, CONFIRMED, CANCELLED)

### 3-2. 대리점장 대시보드에서 확인

#### 접근 경로
```
대리점장 로그인 → 팀 관리
/partner/[partnerId]/team
```

#### 확인 가능한 정보
1. **정액제 판매원 관리 섹션**:
   - 자신의 팀에 속한 정액제 판매원 목록
   - 각 판매원의 상태 (체험 중, 활성, 만료)
   - 무료 체험 시작 버튼
   - 링크 사용자 변경

2. **팀 성과 대시보드**:
   - 팀 전체 매출 통계
   - 판매원별 매출 현황
   - 수당 내역

#### 대리점장 대시보드 메뉴
```
대리점장 로그인 → 대시보드
/partner/[partnerId]/dashboard
```

**확인 가능한 정보**:
- 전체 매출 통계
- 최근 판매 내역
- 고객 관리
- 판매원별 성과

---

## 4. 정산 확인

### 4-1. 관리자 패널 - 정산 대시보드

#### 접근 경로
```
관리자 패널 → 어필리에이트 → 정산 대시보드
/admin/affiliate/settlements
```

#### 확인 가능한 정보
- 전체 정산 현황
- 판매원별 정산 내역
- 정산 대기 / 정산 완료 구분
- 수당 지급 내역
- 원천징수 내역

### 4-2. 관리자 패널 - 지급명세서 관리

#### 접근 경로
```
관리자 패널 → 어필리에이트 → 지급명세서 관리
/admin/affiliate/statements
```

#### 확인 가능한 정보
- 판매원별 지급명세서
- 정산 기간별 내역
- 수당 상세 내역

### 4-3. 관리자 패널 - 수당 조정 승인

#### 접근 경로
```
관리자 패널 → 어필리에이트 → 수당 조정 승인
/admin/affiliate/adjustments
```

#### 확인 가능한 정보
- 수당 조정 요청 내역
- 승인/거부 처리
- 조정 사유 및 금액

### 4-4. Gest 계정의 정산 확인 방법

#### 단계
1. 관리자 패널 → **정산 대시보드** 접근
2. 판매원 필터에서 `gest1` (또는 해당 gest 계정) 검색
3. 또는 **판매원 대시보드**에서 gest 계정 선택

#### 확인 가능한 정보
- Gest 계정의 판매 내역
- 수당 계산 내역
- 정산 상태 (대기/완료)
- 지급 예정 금액

---

## 5. 전체 테스트 플로우

### 5-1. 초기 설정
1. ✅ 관리자 패널 → **어필리에이트 수당** → 상품 선택 → 수당 설정
2. ✅ 관리자 패널 → **정액제 판매원** → 테스트 계정 생성 (gest1)

### 5-2. 계정 테스트
1. ✅ gest1 / zxc1 로그인
2. ✅ 개인몰 접근 (`/gest1/shop`) → 상품 표시 확인
3. ✅ 링크 생성 테스트
4. ✅ 판매 확정 테스트

### 5-3. 매출 확인
1. ✅ 관리자 패널 → **판매원 대시보드** → gest1 매출 확인
2. ✅ 관리자 패널 → **판매 확정 승인** → 판매 승인 처리
3. ✅ 대리점장 대시보드 → 팀 관리 → 정액제 판매원 목록 확인

### 5-4. 정산 확인
1. ✅ 관리자 패널 → **정산 대시보드** → gest1 정산 내역 확인
2. ✅ 관리자 패널 → **지급명세서 관리** → gest1 지급명세서 확인

---

## 6. 주요 메뉴 위치 요약

### 관리자 패널
- **어필리에이트 수당**: `/admin/affiliate/products`
- **정액제 판매원**: `/admin/subscription`
- **판매원 대시보드**: `/admin/affiliate/agent-dashboard` (일반 판매원 및 Gest 계정 모두 확인 가능)
- **정산 대시보드**: `/admin/affiliate/settlements`
- **지급명세서 관리**: `/admin/affiliate/statements`
- **판매 확정 승인**: `/admin/affiliate/sales-confirmation/pending`
- **수당 조정 승인**: `/admin/affiliate/adjustments`

### 대리점장 패널
- **팀 관리**: `/partner/[partnerId]/team`
- **대시보드**: `/partner/[partnerId]/dashboard`

### Gest 계정 (정액제 판매원)
- **개인몰**: `/gest1/shop` (또는 `/gest2/shop`, ...)
- **대시보드**: `/partner/gest1/dashboard`

### 일반 판매원 (user1 등)
- **개인몰**: `/user1/shop` (또는 다른 판매원 아이디)
- **대시보드**: `/partner/user1/dashboard`

---

## 7. 주의사항

1. **수당 설정 필수**: Gest 계정의 개인몰에 상품이 표시되려면 반드시 수당이 설정되어 있어야 합니다.
2. **수당 설정 위치**: 관리자 패널 → 어필리에이트 → 어필리에이트 수당
3. **정액제 판매원 수당 설정**: Gest 계정은 정액제 판매원(`SUBSCRIPTION_AGENT`)이지만, 수당은 일반 판매원 수당(`salesShareAmount`)을 사용합니다. 어필리에이트 수당 페이지에서 판매원 수당(`salesShareAmount`)을 설정하면 Gest 계정의 개인몰에 상품이 표시됩니다.
4. **매출 확인**: 판매 확정 후 관리자 패널과 대리점장 대시보드에서 확인 가능합니다.
5. **정산 확인**: 정산 대시보드에서 전체 정산 내역을 확인할 수 있습니다.

---

## 8. 빠른 참조 가이드

### 8-1. 수당 설정 → 개인몰 상품 표시 플로우

```
1. 관리자 패널 → 어필리에이트 → 어필리에이트 수당
2. 상품 선택 → 수당 티어 설정 → 판매원 수당(salesShareAmount) 입력
3. Gest 계정 생성 (관리자 패널 → 정액제 판매원 → 테스트 계정 생성)
4. Gest 계정 로그인 (gest1 / zxc1)
5. 개인몰 접근 (/gest1/shop)
   - 수당 있음 → 상품 표시 ✅
   - 수당 없음 → "상품 준비 중" 메시지 ❌
```

### 8-2. 매출 확인 플로우

```
1. Gest 계정에서 판매 확정 요청
2. 관리자 패널 → 판매 확정 승인 → 승인 처리
3. 매출 확인:
   - 관리자 패널 → 판매원 대시보드 → gest1 선택
   - 관리자 패널 → 정산 대시보드 → gest1 필터
   - 대리점장 대시보드 → 팀 관리 → 정액제 판매원 목록
```

### 8-3. 정산 확인 플로우

```
1. 관리자 패널 → 정산 대시보드
2. 판매원 필터에서 gest1 검색
3. 정산 내역 확인:
   - 판매 건수
   - 수당 금액
   - 원천징수
   - 정산 상태 (대기/완료)
4. 지급명세서 확인:
   - 관리자 패널 → 지급명세서 관리
   - gest1 선택
```

---

## 완료! 🎉

위의 가이드를 따라 Gest 계정을 생성하고 테스트할 수 있습니다.

### 핵심 포인트
- ✅ **수당 설정 필수**: 어필리에이트 수당 페이지에서 판매원 수당 설정
- ✅ **개인몰 상품 표시**: 수당이 설정되어야만 상품이 표시됨
- ✅ **매출 확인**: 관리자 패널과 대리점장 대시보드에서 확인 가능
- ✅ **정산 확인**: 정산 대시보드에서 전체 정산 내역 확인

