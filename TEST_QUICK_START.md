# 판매 확정 프로세스 테스트 빠른 시작 가이드

> 작성일: 2025-01-28  
> 목적: 빠르게 테스트를 시작하는 방법

---

## 🚀 빠른 시작 (3단계)

### 1단계: 테스트 데이터 생성

터미널에서 실행:

```bash
cd /home/userhyeseon28/projects/cruise-guide
npx tsx scripts/create-sales-confirmation-test-data.ts
```

**예상 출력:**
```
🧪 판매 확정 프로세스 테스트 데이터 생성 시작...

1️⃣ 관리자 계정 확인 중...
   ✅ 관리자: 관리자이름 (ID: 1)

2️⃣ 판매원 계정 확인 중...
   ✅ 판매원: 판매원이름 (ID: 2)
   ✅ 프로필 ID: 3

...

✨ 테스트 데이터 생성 완료!
```

---

### 2단계: 판매원 대시보드 테스트

1. **판매원 계정으로 로그인**
   - 전화번호 또는 이메일로 로그인
   - 비밀번호: `1101` (기본값)

2. **대시보드 접속**
   - URL: `/partner/[mallUserId]/dashboard`
   - 예: `/partner/user1/dashboard`

3. **"내 판매 목록" 섹션 확인**
   - 4개의 판매가 표시되어야 함
   - 각각 다른 상태 (PENDING, PENDING_APPROVAL, APPROVED, REJECTED)

4. **판매 확정 요청 테스트**
   - PENDING 상태인 판매에서 "확정 요청" 버튼 클릭
   - 녹음 파일 선택 (MP3, WAV, M4A, 50MB 이하)
   - "요청 제출" 클릭

---

### 3단계: 관리자 승인 테스트

1. **관리자 계정으로 로그인**
   - 관리자 전화번호 또는 이메일로 로그인

2. **승인 대기 페이지 접속**
   - URL: `/admin/affiliate/sales-confirmation/pending`

3. **승인 대기 목록 확인**
   - 최소 1개 이상의 승인 대기 판매가 표시되어야 함

4. **녹음 파일 확인**
   - "녹음 파일 확인" 링크 클릭
   - Google Drive에서 파일 확인

5. **판매 승인 또는 거부**
   - "승인" 버튼 클릭 → 수당 자동 계산 확인
   - 또는 "거부" 버튼 클릭 → 거부 사유 입력

---

## 📋 체크리스트

### 판매원 테스트
- [ ] 판매 목록이 표시되는가?
- [ ] "확정 요청" 버튼이 작동하는가?
- [ ] 파일 업로드가 정상 작동하는가?
- [ ] 상태가 "승인 대기"로 변경되는가?

### 관리자 테스트
- [ ] 승인 대기 목록이 표시되는가?
- [ ] 녹음 파일 링크가 작동하는가?
- [ ] "승인" 버튼이 작동하는가?
- [ ] 수당이 자동 계산되는가?
- [ ] "거부" 버튼이 작동하는가?

---

## 🐛 문제 해결

### 문제: 판매 목록이 표시되지 않음

**해결:**
```bash
# 테스트 데이터 재생성
npx tsx scripts/create-sales-confirmation-test-data.ts
```

### 문제: 파일 업로드 실패

**확인:**
- Google Drive 환경 변수 설정 확인
- 파일 크기: 50MB 이하
- 파일 형식: MP3, WAV, M4A

### 문제: 승인 대기 목록이 비어있음

**해결:**
- 판매원 대시보드에서 판매 확정 요청 제출
- 또는 데이터베이스에서 직접 상태 변경:
```sql
UPDATE "AffiliateSale" 
SET status = 'PENDING_APPROVAL' 
WHERE id = [판매ID];
```

---

## 📚 상세 가이드

더 자세한 테스트 방법은 다음 문서를 참고하세요:
- `TEST_STEP_BY_STEP.md` - 단계별 상세 테스트 가이드
- `TEST_GUIDE_DETAILED.md` - 전체 테스트 시나리오

---

## ✅ 완료!

모든 테스트를 완료했다면, 판매 확정 프로세스가 정상적으로 작동하는 것입니다! 🎉


> 작성일: 2025-01-28  
> 목적: 빠르게 테스트를 시작하는 방법

---

## 🚀 빠른 시작 (3단계)

### 1단계: 테스트 데이터 생성

터미널에서 실행:

```bash
cd /home/userhyeseon28/projects/cruise-guide
npx tsx scripts/create-sales-confirmation-test-data.ts
```

**예상 출력:**
```
🧪 판매 확정 프로세스 테스트 데이터 생성 시작...

1️⃣ 관리자 계정 확인 중...
   ✅ 관리자: 관리자이름 (ID: 1)

2️⃣ 판매원 계정 확인 중...
   ✅ 판매원: 판매원이름 (ID: 2)
   ✅ 프로필 ID: 3

...

✨ 테스트 데이터 생성 완료!
```

---

### 2단계: 판매원 대시보드 테스트

1. **판매원 계정으로 로그인**
   - 전화번호 또는 이메일로 로그인
   - 비밀번호: `1101` (기본값)

2. **대시보드 접속**
   - URL: `/partner/[mallUserId]/dashboard`
   - 예: `/partner/user1/dashboard`

3. **"내 판매 목록" 섹션 확인**
   - 4개의 판매가 표시되어야 함
   - 각각 다른 상태 (PENDING, PENDING_APPROVAL, APPROVED, REJECTED)

4. **판매 확정 요청 테스트**
   - PENDING 상태인 판매에서 "확정 요청" 버튼 클릭
   - 녹음 파일 선택 (MP3, WAV, M4A, 50MB 이하)
   - "요청 제출" 클릭

---

### 3단계: 관리자 승인 테스트

1. **관리자 계정으로 로그인**
   - 관리자 전화번호 또는 이메일로 로그인

2. **승인 대기 페이지 접속**
   - URL: `/admin/affiliate/sales-confirmation/pending`

3. **승인 대기 목록 확인**
   - 최소 1개 이상의 승인 대기 판매가 표시되어야 함

4. **녹음 파일 확인**
   - "녹음 파일 확인" 링크 클릭
   - Google Drive에서 파일 확인

5. **판매 승인 또는 거부**
   - "승인" 버튼 클릭 → 수당 자동 계산 확인
   - 또는 "거부" 버튼 클릭 → 거부 사유 입력

---

## 📋 체크리스트

### 판매원 테스트
- [ ] 판매 목록이 표시되는가?
- [ ] "확정 요청" 버튼이 작동하는가?
- [ ] 파일 업로드가 정상 작동하는가?
- [ ] 상태가 "승인 대기"로 변경되는가?

### 관리자 테스트
- [ ] 승인 대기 목록이 표시되는가?
- [ ] 녹음 파일 링크가 작동하는가?
- [ ] "승인" 버튼이 작동하는가?
- [ ] 수당이 자동 계산되는가?
- [ ] "거부" 버튼이 작동하는가?

---

## 🐛 문제 해결

### 문제: 판매 목록이 표시되지 않음

**해결:**
```bash
# 테스트 데이터 재생성
npx tsx scripts/create-sales-confirmation-test-data.ts
```

### 문제: 파일 업로드 실패

**확인:**
- Google Drive 환경 변수 설정 확인
- 파일 크기: 50MB 이하
- 파일 형식: MP3, WAV, M4A

### 문제: 승인 대기 목록이 비어있음

**해결:**
- 판매원 대시보드에서 판매 확정 요청 제출
- 또는 데이터베이스에서 직접 상태 변경:
```sql
UPDATE "AffiliateSale" 
SET status = 'PENDING_APPROVAL' 
WHERE id = [판매ID];
```

---

## 📚 상세 가이드

더 자세한 테스트 방법은 다음 문서를 참고하세요:
- `TEST_STEP_BY_STEP.md` - 단계별 상세 테스트 가이드
- `TEST_GUIDE_DETAILED.md` - 전체 테스트 시나리오

---

## ✅ 완료!

모든 테스트를 완료했다면, 판매 확정 프로세스가 정상적으로 작동하는 것입니다! 🎉


> 작성일: 2025-01-28  
> 목적: 빠르게 테스트를 시작하는 방법

---

## 🚀 빠른 시작 (3단계)

### 1단계: 테스트 데이터 생성

터미널에서 실행:

```bash
cd /home/userhyeseon28/projects/cruise-guide
npx tsx scripts/create-sales-confirmation-test-data.ts
```

**예상 출력:**
```
🧪 판매 확정 프로세스 테스트 데이터 생성 시작...

1️⃣ 관리자 계정 확인 중...
   ✅ 관리자: 관리자이름 (ID: 1)

2️⃣ 판매원 계정 확인 중...
   ✅ 판매원: 판매원이름 (ID: 2)
   ✅ 프로필 ID: 3

...

✨ 테스트 데이터 생성 완료!
```

---

### 2단계: 판매원 대시보드 테스트

1. **판매원 계정으로 로그인**
   - 전화번호 또는 이메일로 로그인
   - 비밀번호: `1101` (기본값)

2. **대시보드 접속**
   - URL: `/partner/[mallUserId]/dashboard`
   - 예: `/partner/user1/dashboard`

3. **"내 판매 목록" 섹션 확인**
   - 4개의 판매가 표시되어야 함
   - 각각 다른 상태 (PENDING, PENDING_APPROVAL, APPROVED, REJECTED)

4. **판매 확정 요청 테스트**
   - PENDING 상태인 판매에서 "확정 요청" 버튼 클릭
   - 녹음 파일 선택 (MP3, WAV, M4A, 50MB 이하)
   - "요청 제출" 클릭

---

### 3단계: 관리자 승인 테스트

1. **관리자 계정으로 로그인**
   - 관리자 전화번호 또는 이메일로 로그인

2. **승인 대기 페이지 접속**
   - URL: `/admin/affiliate/sales-confirmation/pending`

3. **승인 대기 목록 확인**
   - 최소 1개 이상의 승인 대기 판매가 표시되어야 함

4. **녹음 파일 확인**
   - "녹음 파일 확인" 링크 클릭
   - Google Drive에서 파일 확인

5. **판매 승인 또는 거부**
   - "승인" 버튼 클릭 → 수당 자동 계산 확인
   - 또는 "거부" 버튼 클릭 → 거부 사유 입력

---

## 📋 체크리스트

### 판매원 테스트
- [ ] 판매 목록이 표시되는가?
- [ ] "확정 요청" 버튼이 작동하는가?
- [ ] 파일 업로드가 정상 작동하는가?
- [ ] 상태가 "승인 대기"로 변경되는가?

### 관리자 테스트
- [ ] 승인 대기 목록이 표시되는가?
- [ ] 녹음 파일 링크가 작동하는가?
- [ ] "승인" 버튼이 작동하는가?
- [ ] 수당이 자동 계산되는가?
- [ ] "거부" 버튼이 작동하는가?

---

## 🐛 문제 해결

### 문제: 판매 목록이 표시되지 않음

**해결:**
```bash
# 테스트 데이터 재생성
npx tsx scripts/create-sales-confirmation-test-data.ts
```

### 문제: 파일 업로드 실패

**확인:**
- Google Drive 환경 변수 설정 확인
- 파일 크기: 50MB 이하
- 파일 형식: MP3, WAV, M4A

### 문제: 승인 대기 목록이 비어있음

**해결:**
- 판매원 대시보드에서 판매 확정 요청 제출
- 또는 데이터베이스에서 직접 상태 변경:
```sql
UPDATE "AffiliateSale" 
SET status = 'PENDING_APPROVAL' 
WHERE id = [판매ID];
```

---

## 📚 상세 가이드

더 자세한 테스트 방법은 다음 문서를 참고하세요:
- `TEST_STEP_BY_STEP.md` - 단계별 상세 테스트 가이드
- `TEST_GUIDE_DETAILED.md` - 전체 테스트 시나리오

---

## ✅ 완료!

모든 테스트를 완료했다면, 판매 확정 프로세스가 정상적으로 작동하는 것입니다! 🎉










