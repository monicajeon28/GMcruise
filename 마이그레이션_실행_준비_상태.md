# 마이그레이션 실행 준비 상태

## 🔍 현재 상태

### ✅ 준비 완료
- 마이그레이션 스크립트 작성 완료
- 환경변수 확인 스크립트 작성 완료
- `.env.local` 파일 존재 확인

### ⚠️ 필요한 작업
- `.env.local` 파일에 환경변수 추가 필요 (23개 누락)

---

## 📋 다음 단계

### 옵션 A: 환경변수 설정 후 마이그레이션 (권장)

1. **환경변수 설정**
   - `마이그레이션_환경변수_설정_가이드.md` 파일 참고
   - `.env.local` 파일에 환경변수 추가

2. **환경변수 확인**
   ```bash
   npm run migrate:check-env
   ```

3. **Dry-run 실행**
   ```bash
   npm run migrate:uploads -- --dry-run
   npm run migrate:db-paths -- --dry-run
   ```

4. **실제 마이그레이션 실행**
   ```bash
   npm run migrate:uploads
   npm run migrate:db-paths
   ```

### 옵션 B: 일부 폴더만 마이그레이션

환경변수가 일부만 설정되어 있어도, 설정된 폴더만 마이그레이션할 수 있습니다:

```bash
# 예: images 폴더만 마이그레이션
npm run migrate:uploads -- --only=images --dry-run
```

---

## 📝 환경변수 설정 방법

### 빠른 설정 (복사/붙여넣기)

`마이그레이션_환경변수_설정_가이드.md` 파일의 내용을 `.env.local` 파일에 추가하세요.

### Private Key 설정 주의사항

`GOOGLE_DRIVE_SERVICE_ACCOUNT_PRIVATE_KEY`는 여러 줄로 입력해야 합니다:

```bash
GOOGLE_DRIVE_SERVICE_ACCOUNT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----
MIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQC3ocieialo9oSe
...
-----END PRIVATE KEY-----"
```

또는 각 줄을 `\n`으로 연결:

```bash
GOOGLE_DRIVE_SERVICE_ACCOUNT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQC3ocieialo9oSe\n..."
```

---

## 🚀 바로 시작하기

환경변수 설정이 완료되면:

```bash
# 1. 환경변수 확인
npm run migrate:check-env

# 2. Dry-run 실행 (테스트)
npm run migrate:uploads -- --dry-run

# 3. 실제 마이그레이션 (백업 후!)
npm run migrate:uploads
```

---

## ❓ 질문

1. **환경변수를 지금 설정할까요?** 
   - `.env.local` 파일을 직접 수정하거나
   - 환경변수 설정 스크립트를 실행할 수 있습니다

2. **일부 폴더만 먼저 마이그레이션할까요?**
   - 설정된 환경변수만 사용하여 부분 마이그레이션 가능

어떻게 진행할까요?


