# 배포 후 모니터링 및 테스트 체크리스트

> **작성일**: 2025년 1월 28일  
> **상태**: 배포 완료 후 모니터링 단계

---

## 📋 체크리스트

### 1️⃣ Vercel 배포 상태 확인

#### 배포 확인
- [ ] Vercel 대시보드 접속: https://vercel.com/dashboard
- [ ] 최신 배포 상태 확인 (성공/실패)
- [ ] 빌드 로그 확인 (에러 여부)
- [ ] 배포 URL 접속 확인

#### 빌드 로그 확인 사항
- [ ] 빌드 성공 여부
- [ ] 타입 에러 경고 (무시 설정됨)
- [ ] Prerender 경고 (동적 페이지이므로 정상)
- [ ] 환경 변수 로드 확인

---

### 2️⃣ 환경 변수 설정 확인 (Vercel)

#### 필수 환경 변수

**데이터베이스**
- [ ] `DATABASE_URL` - PostgreSQL 연결 문자열

**AI 기능**
- [ ] `GEMINI_API_KEY` - Google Gemini API 키

**결제 시스템**
- [ ] `PG_SIGNKEY` - 인증 결제 서명 키
- [ ] `PG_SIGNKEY_NON_AUTH` - 비인증 결제 서명 키
- [ ] `PG_MID_AUTH` - 인증 결제 MID
- [ ] `PG_MID_NON_AUTH` - 비인증 결제 MID
- [ ] `PG_FIELD_ENCRYPT_IV` - 인증 결제 암호화 IV
- [ ] `PG_FIELD_ENCRYPT_IV_NON_AUTH` - 비인증 결제 암호화 IV
- [ ] `PG_FIELD_ENCRYPT_KEY` - 인증 결제 암호화 키
- [ ] `PG_FIELD_ENCRYPT_KEY_NON_AUTH` - 비인증 결제 암호화 키
- [ ] `NEXT_PUBLIC_WELCOME_PAY_URL` - 웰컴페이먼츠 결제 페이지 URL
- [ ] `WELCOME_PAY_URL` - 웰컴페이먼츠 결제 페이지 URL (대체)

**기본 설정**
- [ ] `NEXT_PUBLIC_BASE_URL` - 기본 URL (콜백 URL 생성용)

**구글 드라이브 백업 (자동 백업용)**
- [ ] `GOOGLE_SERVICE_ACCOUNT_EMAIL` - 서비스 계정 이메일
- [ ] `GOOGLE_DRIVE_SERVICE_ACCOUNT_PRIVATE_KEY` - 서비스 계정 Private Key
- [ ] `GOOGLE_DRIVE_SHARED_DRIVE_ID` - 공유 드라이브 ID

**Cron Job 보안**
- [ ] `CRON_SECRET` - Cron Job 인증 비밀 키

**선택사항**
- [ ] `OPENWEATHER_API_KEY` - 날씨 기능 (선택)
- [ ] 기타 선택적 환경 변수

---

### 3️⃣ 주요 기능 테스트

#### 로그인/회원가입
- [ ] 일반 사용자 로그인 테스트 (비밀번호: 3800)
- [ ] 신규 사용자 자동 회원가입 테스트
- [ ] 관리자 로그인 테스트
- [ ] 파트너 로그인 테스트 (비밀번호: qwe1)
- [ ] 세션 유지 확인

#### AI 채팅 기능
- [ ] AI 채팅 페이지 접속 확인
- [ ] 질문 입력 및 응답 확인
- [ ] 스트리밍 응답 동작 확인
- [ ] 채팅 기록 저장 확인

#### 체크리스트 기능
- [ ] 체크리스트 페이지 접속 확인
- [ ] 항목 추가 테스트
- [ ] 항목 완료 체크 테스트
- [ ] 항목 삭제 테스트
- [ ] DB 연동 확인 (다른 기기에서 동일 데이터 확인)

#### 결제 시스템
- [ ] 결제 페이지 접속 확인
- [ ] 결제 요청 API 테스트 (테스트 모드)
- [ ] 결제 콜백 처리 확인
- [ ] 결제 실패 처리 확인

#### 번역기 기능
- [ ] 번역기 페이지 접속 확인
- [ ] 음성 인식 테스트
- [ ] 번역 기능 테스트
- [ ] 빠른 문장 버튼 동작 확인

#### 관리자 페이지
- [ ] 관리자 대시보드 접속 확인
- [ ] 고객 관리 페이지 접속 확인
- [ ] 상품 관리 페이지 접속 확인
- [ ] 메시지 관리 페이지 접속 확인
- [ ] 데이터 분석 페이지 접속 확인

---

### 4️⃣ 에러 로그 모니터링

#### Vercel 로그 확인
- [ ] Vercel 대시보드 > 프로젝트 > Logs 접속
- [ ] 최근 24시간 에러 로그 확인
- [ ] 런타임 에러 확인
- [ ] API 에러 확인

#### 주요 확인 사항
- [ ] 타입 에러로 인한 런타임 에러
- [ ] 데이터베이스 연결 에러
- [ ] API 키 누락 에러
- [ ] 인증 에러
- [ ] 결제 시스템 에러

---

### 5️⃣ 구글 드라이브 백업 동작 확인

#### Cron Job 스케줄 확인
- [ ] Vercel 대시보드 > 프로젝트 > Settings > Cron Jobs 확인
- [ ] `/api/cron/database-backup` 스케줄 확인: `0 3 * * *` (UTC 오전 3시 = KST 오전 12시)

#### 백업 실행 확인
- [ ] 매일 오전 12시 (한국 시간) 자동 실행 확인
- [ ] 구글 드라이브에 백업 파일 생성 확인
- [ ] 백업 폴더 구조 확인: `DB_Backup_[월]` > `Backup_[날짜]`

#### 수동 백업 테스트
- [ ] 수동 백업 API 호출 테스트 (필요 시)
- [ ] 백업 파일 다운로드 확인

---

### 6️⃣ 성능 모니터링

#### API 응답 시간
- [ ] 주요 API 엔드포인트 응답 시간 확인
- [ ] 느린 API 식별

#### 데이터베이스 성능
- [ ] 데이터베이스 쿼리 성능 확인
- [ ] 느린 쿼리 식별

#### 메모리 사용량
- [ ] Vercel 대시보드에서 메모리 사용량 확인
- [ ] 메모리 누수 확인

---

## 🔧 문제 발생 시 대응

### 배포 실패
1. Vercel 빌드 로그 확인
2. 환경 변수 설정 확인
3. 타입 에러 확인 (필요 시 `ignoreBuildErrors: false`로 변경)
4. 재배포 시도

### 런타임 에러
1. Vercel 로그에서 에러 확인
2. 에러 발생 위치 파악
3. 즉시 수정 및 재배포

### 데이터베이스 연결 실패
1. `DATABASE_URL` 환경 변수 확인
2. 데이터베이스 서버 상태 확인
3. 연결 권한 확인
4. 방화벽 설정 확인

### AI 기능 에러
1. `GEMINI_API_KEY` 환경 변수 확인
2. API 키 유효성 확인
3. API 할당량 확인

### 결제 시스템 에러
1. 결제 관련 환경 변수 확인
2. 웰컴페이먼츠 설정 확인
3. 테스트 모드 확인

### 구글 드라이브 백업 실패
1. 구글 드라이브 환경 변수 확인
2. 서비스 계정 권한 확인
3. 공유 드라이브 접근 권한 확인
4. Private Key 형식 확인

---

## 📊 일일 모니터링 체크리스트

### 매일 확인 사항
- [ ] Vercel 로그 확인 (에러 발생 여부)
- [ ] 주요 기능 동작 확인
- [ ] 구글 드라이브 백업 실행 확인 (매일 오전 12시)

### 주간 확인 사항
- [ ] 사용자 피드백 수집
- [ ] 성능 지표 확인
- [ ] 에러 로그 분석
- [ ] 데이터베이스 백업 확인

---

## ✅ 테스트 완료 체크리스트

### 필수 확인 사항
- [ ] 모든 필수 환경 변수 설정 완료
- [ ] 데이터베이스 연결 확인
- [ ] 주요 기능 동작 확인
- [ ] 에러 로그 확인 (에러 없음)

### 권장 확인 사항
- [ ] 구글 드라이브 백업 동작 확인
- [ ] 성능 모니터링 시작
- [ ] 사용자 피드백 수집 시작

---

**작성자**: AI Assistant  
**상태**: 배포 완료, 모니터링 단계  
**다음 단계**: 환경 변수 확인 및 주요 기능 테스트

