# 세일즈 챗봇 배포 전 체크리스트

> **작성일**: 2025-01-20  
> **상태**: 배포 전 점검용

---

## 🔍 필수 체크 항목

### 1. 기능 테스트

#### 챗봇 기본 기능
- [ ] 챗봇 시작 정상 작동 (`/api/chat-bot/start`)
- [ ] 질문 로드 정상 작동 (`/api/chat-bot/question/{id}`)
- [ ] 사용자 응답 처리 정상 작동
- [ ] 세션 관리 정상 작동

#### SPIN 스크립트 흐름
- [ ] Situation 단계 질문 정상 표시
- [ ] Problem 단계 질문 정상 표시
- [ ] Implication 단계 질문 정상 표시
- [ ] Need-payoff 단계 질문 정상 표시
- [ ] 최종 페이지 URL 이동 정상 작동

#### 동적 콘텐츠
- [ ] 상품명 동적 삽입 확인
- [ ] 사용자 이름 동적 삽입 확인
- [ ] 가격 정보 동적 삽입 확인
- [ ] 크루즈 라인 정보 동적 삽입 확인

### 2. 미디어 표시 테스트

#### 영상 표시
- [ ] order 4.5: 부산 출발 크루즈 영상 표시
- [ ] order 7-13: 문제 해결 영상 각각 표시
- [ ] order 14-18.7: 해결책 영상 각각 표시 (다섯번째, 여섯번째, 일곱번째 구분)
- [ ] order 20.5: 코스타 발코니 룸 영상 표시
- [ ] 크루즈 라인별 기본 영상 표시

#### 이미지 표시
- [ ] order 3: 고객 후기 사진 9장 표시 (3x3 그리드)
- [ ] **order 4: 여행지 사진 5장 표시 (2열 그리드) - ⚠️ 현재 이슈**
- [ ] order 21: 객실 이미지 3장 표시

### 3. 국가별 이미지 매칭 테스트

각 국가별 크루즈 상품으로 테스트:
- [ ] 일본 크루즈 → 일본 이미지 5장 표시
- [ ] 대만 크루즈 → 대만 이미지 5장 표시
- [ ] 홍콩 크루즈 → 홍콩 이미지 5장 표시
- [ ] 싱가포르 크루즈 → 싱가포르 이미지 5장 표시
- [ ] 베트남 크루즈 → 베트남 이미지 5장 표시
- [ ] 태국 크루즈 → 태국 이미지 5장 표시
- [ ] 여러 국가 포함 시 모든 국가 이미지 표시

### 4. 판매원/대리점장 연결 테스트

#### 링크 생성
- [ ] 판매원 대시보드에서 챗봇 링크 생성 확인
- [ ] 대리점장 대시보드에서 챗봇 링크 생성 확인
- [ ] `productCode` 파라미터 정상 전달
- [ ] `partner` 파라미터 정상 전달

#### 세션 추적
- [ ] 판매원을 통한 접근 시 세션 추적
- [ ] 대리점장을 통한 접근 시 세션 추적
- [ ] 세션 데이터 정상 저장

### 5. 에러 처리 테스트

#### 예외 상황
- [ ] 상품 정보 없을 때 기본값 처리
- [ ] 이미지 없을 때 기본 이미지 표시
- [ ] 영상 URL 오류 시 처리
- [ ] 네트워크 오류 시 재시도 로직
- [ ] 잘못된 질문 ID 접근 시 404 처리

### 6. 성능 테스트

- [ ] API 응답 시간 < 1초
- [ ] 이미지 로딩 시간 < 3초
- [ ] 동시 접속자 10명 이상 테스트
- [ ] 메모리 사용량 정상 범위

### 7. 보안 테스트

- [ ] SQL Injection 방지 확인
- [ ] XSS 방지 확인 (HTML 이스케이프)
- [ ] 세션 관리 보안 확인
- [ ] CSRF 보호 확인

---

## 🐛 알려진 이슈 (배포 전 해결 필요)

### 1. 여행지 사진 표시 안 됨 (중요)

**현상**: "여행지 사진 보기" 질문에서 국가별 관광 사진이 표시되지 않음

**영향도**: 높음 (핵심 기능)

**해결 필요 사항**:
1. 실제 "여행지 사진 보기" 질문의 ID 확인
2. 질문 텍스트 매칭 조건 확인
3. 서버 로그에서 `information` 필드 확인
4. 클라이언트 렌더링 확인

**임시 해결책**: 
- order 기반 매칭 추가
- 또는 질문 ID 직접 매핑

---

## 📋 배포 절차

### 1. 배포 전
- [ ] 모든 체크리스트 항목 완료
- [ ] 알려진 이슈 해결 또는 문서화
- [ ] 백업 완료
- [ ] 스테이징 환경에서 테스트 완료

### 2. 배포 중
- [ ] 서버 재시작
- [ ] 데이터베이스 마이그레이션 확인
- [ ] 환경 변수 확인

### 3. 배포 후
- [ ] 기본 기능 동작 확인
- [ ] 에러 로그 모니터링
- [ ] 성능 모니터링
- [ ] 사용자 피드백 수집

---

## 📊 모니터링 체크리스트

배포 후 24시간 내 확인:
- [ ] API 에러율 < 1%
- [ ] 평균 응답 시간 < 1초
- [ ] 이미지 로딩 실패율 < 5%
- [ ] 사용자 세션 정상 생성
- [ ] 최종 페이지 이동률 확인

---

## 🔄 롤백 계획

문제 발생 시:
1. 백업 파일로 복원: `cruise-guide_sales-chatbot_backup_YYYYMMDD_HHMMSS.tar.gz`
2. 이전 버전으로 롤백
3. 문제 원인 분석
4. 수정 후 재배포

---

**작성자**: AI Assistant  
**최종 업데이트**: 2025-01-20
