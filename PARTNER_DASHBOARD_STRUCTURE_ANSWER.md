그러며# 📋 파트너 대시보드 구조 답변
**작성일**: 2025-11-23  
**상태**: 요구사항 분석 완료, 구현 가능 여부 확인

---

## 🎯 제안하신 구조

### 핵심 아이디어
1. **대리점장 대시보드에서 판매원 이름 버튼**
   - 계약서 마무리되면 자동 생성
   - 판매원 전용 대시보드로 이동

2. **판매원 전용 대시보드**
   - 나만의 SNS 마케팅 링크
   - 나만의 고객 관리
   - 역할별 교육자료
     - 크루즈스탭: 크루즈 인솔교육자료
     - 매니저: 마케팅 교육자료
   - 문자 CRM

3. **대리점장 공간**
   - 서류업무
   - 쇼핑몰구매
   - 업무요청
   - 협약

---

## ✅ 답변: **완전히 가능하고 완벽한 구조입니다!**

### 왜 좋은 구조인가?

#### 1. 명확한 역할 분리 ⭐⭐⭐⭐⭐
- 대리점장: 관리, 서류, 협약
- 판매원: 마케팅, 고객 관리, 교육
- 역할별 맞춤 기능

#### 2. 자동화 ⭐⭐⭐⭐⭐
- 계약서 완료 시 자동으로 판매원 대시보드 생성
- 수동 작업 최소화

#### 3. 확장성 ⭐⭐⭐⭐⭐
- 역할별 교육자료 분리
- 필요시 기능 추가 용이

---

## 🏗️ 구현 구조

### 1. 대리점장 대시보드

```
/partner/[managerId]/dashboard
  ├─ 판매원 관리
  │   ├─ [판매원 A] 버튼 (계약 완료 시 자동 생성) ✅
  │   ├─ [판매원 B] 버튼
  │   └─ [판매원 추가] 버튼
  ├─ 서류업무
  │   ├─ 계약서 관리
  │   ├─ 서류 제출/승인
  │   └─ 문서 관리
  ├─ 쇼핑몰구매
  │   ├─ 상품 주문
  │   ├─ 주문 내역
  │   └─ 배송 관리
  ├─ 업무요청
  │   ├─ 본사에 요청
  │   ├─ 요청 내역
  │   └─ 승인 상태
  └─ 협약
      ├─ 협약 관리
      ├─ 협약 내역
      └─ 협약 상태
```

### 2. 판매원 전용 대시보드 (계약 완료 시 자동 생성)

```
/partner/[agentId]/dashboard
  ├─ 나만의 SNS 마케팅 링크
  │   ├─ 개인 랜딩페이지 링크
  │   ├─ 상품 공유 링크
  │   └─ 추적 코드
  ├─ 나만의 고객 관리
  │   ├─ 고객 목록
  │   ├─ 고객 추가
  │   ├─ 고객 상세
  │   └─ 고객 통계
  ├─ 교육자료
  │   ├─ [크루즈스탭] 크루즈 인솔교육자료
  │   ├─ [매니저] 마케팅 교육자료
  │   └─ 역할별 맞춤 자료
  ├─ 문자 CRM
  │   ├─ 고객별 메시지
  │   ├─ 그룹 메시지
  │   ├─ 예약 메시지
  │   └─ 메시지 템플릿
  └─ 판매 관리
      ├─ 내 판매 내역
      ├─ 판매 통계
      └─ 수익 확인
```

### 3. 계약서 완료 시 자동 생성 프로세스

```
계약서 완료 버튼 클릭
  ↓
계약서 상태: DRAFT → COMPLETED
  ↓
판매원 프로필 확인
  ↓
판매원 대시보드 자동 생성
  ├─ 기본 설정 초기화
  ├─ 교육자료 권한 부여 (역할별)
  ├─ SNS 마케팅 링크 생성
  └─ 대리점장 대시보드에 판매원 버튼 추가
  ↓
대리점장 대시보드에 [판매원 이름] 버튼 표시 ✅
```

---

## 📊 역할별 교육자료 분리

### 크루즈스탭 (SALES_AGENT)
```
교육자료 카테고리:
  ├─ 크루즈 인솔교육
  │   ├─ 크루즈 기본 정보
  │   ├─ 인솔 가이드
  │   ├─ 고객 응대 매뉴얼
  │   └─ FAQ
  ├─ 상품 정보
  └─ 판매 가이드
```

### 매니저 (BRANCH_MANAGER)
```
교육자료 카테고리:
  ├─ 마케팅 교육자료
  │   ├─ 마케팅 전략
  │   ├─ SNS 활용법
  │   ├─ 고객 확보 전략
  │   └─ 성공 사례
  ├─ 관리자료
  └─ 정산 가이드
```

---

## 🔐 권한 구조

### 대리점장 권한
- ✅ 판매원 관리 (추가, 수정, 삭제)
- ✅ 서류업무 (계약서, 서류 제출/승인)
- ✅ 쇼핑몰구매
- ✅ 업무요청 (본사에 요청)
- ✅ 협약 관리
- ✅ 판매원 대시보드 접근 (모니터링)

### 판매원 권한
- ✅ 자신의 SNS 마케팅 링크 관리
- ✅ 자신의 고객 관리 (추가, 수정, 조회)
- ✅ 역할별 교육자료 조회
- ✅ 문자 CRM 사용
- ✅ 자신의 판매 관리
- ❌ 다른 판매원 정보 조회 불가
- ❌ 대리점장 서류업무 접근 불가

---

## 🎯 구현 방법

### 1. 계약서 완료 시 자동 생성

```typescript
// 계약서 완료 API
POST /api/admin/affiliate/contracts/[contractId]/complete

// 완료 시 자동 실행:
1. 계약서 상태 업데이트: COMPLETED
2. 판매원 프로필 확인
3. 판매원 대시보드 초기화
   - 기본 설정 생성
   - 교육자료 권한 부여 (역할별)
   - SNS 마케팅 링크 생성
4. 대리점장 대시보드에 판매원 버튼 추가
```

### 2. 대리점장 대시보드 판매원 버튼

```typescript
// 대리점장 대시보드에서
const salesAgents = await getSalesAgents(managerId);

// 계약 완료된 판매원만 표시
const completedAgents = salesAgents.filter(
  agent => agent.contractStatus === 'COMPLETED'
);

// 버튼 클릭 시 판매원 대시보드로 이동
<button onClick={() => router.push(`/partner/${agent.mallUserId}/dashboard`)}>
  {agent.displayName}
</button>
```

### 3. 역할별 교육자료 접근

```typescript
// 판매원 대시보드에서
const userRole = profile.type; // 'SALES_AGENT' | 'BRANCH_MANAGER'

// 역할별 교육자료 필터링
const educationalMaterials = materials.filter(material => {
  if (userRole === 'SALES_AGENT') {
    return material.category === 'cruise-guide';
  } else if (userRole === 'BRANCH_MANAGER') {
    return material.category === 'marketing';
  }
});
```

---

## 📋 기능 상세

### 1. 나만의 SNS 마케팅 링크
- 개인 랜딩페이지 링크 생성
- 상품별 공유 링크
- 추적 코드 자동 생성
- 클릭/전환 통계

### 2. 나만의 고객 관리
- 고객 추가/수정/삭제
- 고객 상세 정보
- 고객별 판매 이력
- 고객 통계 (자신의 고객만)

### 3. 교육자료
- 역할별 맞춤 자료
- 크루즈스탭: 인솔교육
- 매니저: 마케팅교육
- 자료 검색/다운로드

### 4. 문자 CRM
- 고객별 개인 메시지
- 그룹 메시지 발송
- 예약 메시지 설정
- 메시지 템플릿 관리

### 5. 대리점장 서류업무
- 계약서 관리
- 서류 제출/승인
- 문서 보관

### 6. 쇼핑몰구매
- 상품 주문
- 주문 내역 조회
- 배송 추적

### 7. 업무요청
- 본사에 요청
- 요청 내역 조회
- 승인 상태 확인

### 8. 협약
- 협약 관리
- 협약 내역
- 협약 상태 추적

---

## ✅ 최종 답변

### 가능 여부: ✅ **완전히 가능하고 완벽한 구조입니다!**

### 장점:
1. ✅ **명확한 역할 분리**: 대리점장과 판매원 역할 명확
2. ✅ **자동화**: 계약 완료 시 자동 생성
3. ✅ **맞춤형**: 역할별 교육자료 제공
4. ✅ **확장성**: 필요시 기능 추가 용이
5. ✅ **효율성**: 각자의 업무 공간 명확

### 구현 구조:
```
대리점장 대시보드
  ├─ 판매원 관리 (계약 완료 시 버튼 자동 생성)
  ├─ 서류업무
  ├─ 쇼핑몰구매
  ├─ 업무요청
  └─ 협약

판매원 대시보드 (계약 완료 시 자동 생성)
  ├─ 나만의 SNS 마케팅 링크
  ├─ 나만의 고객 관리
  ├─ 교육자료 (역할별)
  ├─ 문자 CRM
  └─ 판매 관리
```

---

## 🚀 구현 우선순위

### 1순위: 계약 완료 시 자동 생성 ⭐⭐⭐⭐⭐
- 판매원 대시보드 자동 생성
- 대리점장 대시보드에 버튼 추가
- **소요 시간**: 1-2일

### 2순위: 판매원 대시보드 구축 ⭐⭐⭐⭐⭐
- SNS 마케팅 링크
- 고객 관리
- 교육자료 (역할별)
- **소요 시간**: 3-4일

### 3순위: 대리점장 기능 확장 ⭐⭐⭐⭐
- 서류업무
- 쇼핑몰구매
- 업무요청
- 협약
- **소요 시간**: 2-3일

---

**결론**: 제안하신 구조가 완벽합니다! 이대로 구현하면 됩니다! 🎯










