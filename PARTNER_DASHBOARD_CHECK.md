# 파트너 대시보드 기능 복구 확인 가이드

## ✅ 복구된 기능

**파일**: `app/partner/[partnerId]/dashboard/page.tsx`

**추가된 섹션**: "고객 여행 예약 현황"

---

## 🚀 확인 절차

### 1. 서버 재시작

```bash
# 현재 실행 중인 서버가 있다면 Ctrl+C로 종료
# 그 다음 서버 재시작
cd /home/userhyeseon28/projects/cruise-guide
npm run dev
```

### 2. 파트너 로그인

1. 브라우저에서 `http://localhost:3000/partner` 접속
2. 파트너 모드로 로그인:
   - **아이디**: `boss1` 또는 `user1` (또는 등록된 파트너 ID)
   - **비밀번호**: `qwe1` 또는 `1101`
3. 로그인 성공 후 자동으로 `/partner/[partnerId]/dashboard`로 이동

### 3. 대시보드 확인

다음 섹션들이 표시되어야 합니다:

1. ✅ **헤더 섹션**
   - 파트너 정보
   - 빠른 메뉴

2. ✅ **나의 파트너 정보** (왼쪽 카드)
   - 파트너 아이디
   - 랜딩 슬러그
   - 담당자 정보 등

3. ✅ **파트너 지원 안내** (오른쪽 카드)
   - 파트너몰 안내
   - 고객 관리 툴 안내
   - 팀 관리 안내

4. ✅ **고객에게 보여지는 파트너몰** 섹션
   - ProductList 컴포넌트

5. ✅ **고객 여행 예약 현황** 섹션 (새로 추가됨!)
   - 제목: "고객 여행 예약 현황"
   - 설명: "파트너를 통해 예약한 고객들의 여행 정보를 확인할 수 있습니다."

### 4. 예약 현황 섹션 확인

#### 케이스 A: 예약이 있는 경우
- 테이블이 표시됨
- 컬럼: 고객명, 선박명, 출발일, 인원, 상태, 여권
- 최근 10개 예약이 출발일 기준 내림차순으로 표시

#### 케이스 B: 예약이 없는 경우
- "아직 등록된 예약이 없습니다." 메시지
- "신규 예약 등록하기" 버튼 표시

---

## 🔍 예상되는 화면 구성

```
┌─────────────────────────────────────────┐
│  파트너 대시보드 헤더                    │
└─────────────────────────────────────────┘

┌──────────────────┬──────────────────┐
│ 나의 파트너 정보  │ 파트너 지원 안내  │
└──────────────────┴──────────────────┘

┌─────────────────────────────────────────┐
│ 고객에게 보여지는 파트너몰               │
│ [ProductList 컴포넌트]                   │
└─────────────────────────────────────────┘

┌─────────────────────────────────────────┐
│ 고객 여행 예약 현황                      │
│ 파트너를 통해 예약한 고객들의 여행 정보를 │
│ 확인할 수 있습니다.                      │
│                                          │
│ [테이블 또는 빈 상태 메시지]              │
└─────────────────────────────────────────┘
```

---

## 🐛 문제 발생 시 확인 사항

### 1. 서버 에러 확인
```bash
# 터미널에서 에러 메시지 확인
# 특히 Prisma 관련 에러가 있는지 확인
```

### 2. 브라우저 콘솔 확인
- F12로 개발자 도구 열기
- Console 탭에서 JavaScript 에러 확인
- Network 탭에서 API 요청 실패 확인

### 3. 데이터 확인
```bash
# 파트너의 AffiliateLead가 있는지 확인
# 예약 데이터가 있는지 확인
```

### 4. 일반적인 문제

#### 문제: 섹션이 보이지 않음
- **원인**: 서버가 재시작되지 않음
- **해결**: 서버 재시작 (`npm run dev`)

#### 문제: "아직 등록된 예약이 없습니다"만 표시
- **원인**: 파트너에게 연결된 고객 예약이 없음
- **해결**: 정상 동작입니다. 테스트를 위해 예약을 생성해야 함

#### 문제: 에러 발생
- **원인**: Prisma 쿼리 오류 또는 타입 오류
- **해결**: 터미널 에러 메시지 확인 후 수정

---

## 📋 테스트 체크리스트

- [ ] 서버가 정상적으로 시작됨
- [ ] 파트너 로그인이 정상 작동
- [ ] 대시보드 페이지가 로드됨
- [ ] "고객 여행 예약 현황" 섹션이 표시됨
- [ ] 섹션 제목과 설명이 정상 표시됨
- [ ] 예약이 있으면 테이블이 표시됨
- [ ] 예약이 없으면 빈 상태 메시지가 표시됨
- [ ] 테이블의 모든 컬럼이 정상 표시됨
- [ ] 날짜 형식이 한국어로 표시됨
- [ ] 상태 배지가 올바른 색상으로 표시됨

---

## 💡 추가 정보

### 데이터 흐름
1. `AffiliateLead` → 파트너의 고객 전화번호 목록
2. `User` → 전화번호로 고객 찾기
3. `Reservation` → 고객의 예약 목록
4. `Trip` → 예약에 연결된 여행 정보

### 표시되는 정보
- **고객명**: MainUser.name 또는 MainUser.phone
- **선박명**: Trip.shipName
- **출발일**: Trip.departureDate (한국어 형식)
- **인원**: Reservation.totalPeople
- **상태**: Trip.status (예정/진행중/완료)
- **여권**: Reservation.passportStatus (대기중/나중에/완료)

---

**작업 완료일**: 2025년 1월  
**수정 파일**: `app/partner/[partnerId]/dashboard/page.tsx`









