# 배포 전 최종 체크리스트

## ✅ 완료된 작업

### 1. SAMPLE-MED-001 상품 복구
- ✅ 3일 체험용 테스트 상품 복구 완료
- 상품코드: `SAMPLE-MED-001`
- 크루즈라인: Celebrity Cruises
- 선박명: Celebrity Edge
- 여행기간: 7박 8일
- 방문국가: 스페인, 프랑스, 이탈리아
- 상품 ID: 65

### 2. 관리자 로그인 문제 해결
- ✅ 로그인 API 정상 작동 확인
- ✅ 계정 정보 확인 (모니카 / 01024958013 / 0313)
- ✅ 디버깅 로그 추가 완료

---

## ⚠️ 확인 필요 사항

### 1. 재미나이 API 연결 상태
**현재 상태**: ✅ 재미나이 API 키 확인 완료

**재미나이 API 키**: `AIzaSyC7DeIRD9tvdBK81_MBRNv729Gh1uPxHM4`

**설정 방법**:
재미나이 API는 Google Gemini API를 사용하므로 `GEMINI_API_KEY` 환경 변수로 설정합니다.

**Vercel 환경 변수 설정**:
1. Vercel 대시보드 → 프로젝트 → Settings → Environment Variables
2. **Key**: `GEMINI_API_KEY`
3. **Value**: `AIzaSyC7DeIRD9tvdBK81_MBRNv729Gh1uPxHM4`
4. **Environment**: Production, Preview, Development 모두 선택
5. Save 클릭

**확인 사항**:
- [ ] Vercel에 `GEMINI_API_KEY` 환경 변수가 설정되어 있는지 확인
- [ ] 재미나이 API 키가 올바르게 설정되었는지 확인
- [ ] 배포 후 채팅 기능이 정상 작동하는지 확인

### 2. 도메인 설정 확인
**필수 환경 변수**:
```
NEXT_PUBLIC_BASE_URL=https://your-domain.vercel.app
```

**확인 사항**:
- [ ] Vercel 프로젝트에 도메인이 연결되어 있는지 확인
- [ ] `NEXT_PUBLIC_BASE_URL` 환경 변수가 올바른 도메인으로 설정되어 있는지 확인
- [ ] Production 환경 변수에 도메인 설정되어 있는지 확인

**Vercel 도메인 설정 방법**:
1. Vercel 대시보드 → 프로젝트 → Settings → Domains
2. 도메인 추가 또는 확인
3. 환경 변수에서 `NEXT_PUBLIC_BASE_URL` 업데이트

---

## 📋 배포 전 체크리스트

### 환경 변수 확인
- [ ] `DATABASE_URL` - PostgreSQL 연결 문자열
- [ ] `GEMINI_API_KEY` - Gemini AI API 키 (재미나이 API 키: `AIzaSyC7DeIRD9tvdBK81_MBRNv729Gh1uPxHM4`) ⚠️ **중요: 재미나이 API 키로 업데이트 필요**
- [ ] `NEXT_PUBLIC_BASE_URL` - 프로덕션 도메인 URL (`https://cruisedot.co.kr`)
- [ ] `UPSTASH_REDIS_REST_URL` - Upstash Redis URL
- [ ] `UPSTASH_REDIS_REST_TOKEN` - Upstash Redis 토큰
- [ ] `GOOGLE_DRIVE_SERVICE_ACCOUNT_EMAIL` - Google Drive 서비스 계정 이메일
- [ ] `GOOGLE_DRIVE_SERVICE_ACCOUNT_PRIVATE_KEY` - Google Drive 서비스 계정 Private Key
- [ ] `GOOGLE_DRIVE_BACKUP_FOLDER_ID` - 정액제 백업 폴더 ID
- [ ] 기타 필요한 환경 변수들

### 기능 테스트
- [ ] 관리자 로그인 테스트 (모니카 / 01024958013 / 0313)
- [ ] 일반 사용자 로그인 테스트
- [ ] 3일 체험 로그인 테스트 (비밀번호: 1101)
- [ ] SAMPLE-MED-001 상품 조회 테스트
- [ ] 채팅 기능 테스트
- [ ] 관리자 패널 접근 테스트

### 데이터베이스 확인
- [ ] SAMPLE-MED-001 상품 존재 확인
- [ ] 관리자 계정 존재 확인
- [ ] 필수 데이터 마이그레이션 완료 확인

### 빌드 확인
- [ ] 로컬 빌드 성공 확인 (`npm run build`)
- [ ] 타입 체크 통과 확인 (`npm run typecheck`)
- [ ] 린트 오류 없음 확인 (`npm run lint`)

---

## 🚀 배포 절차

### 1. Git 커밋 및 푸시
```bash
git add .
git commit -m "feat: SAMPLE-MED-001 상품 복구 및 배포 준비"
git push origin main
```

### 2. Vercel 배포 확인
- Vercel 대시보드에서 자동 배포 시작 확인
- 빌드 로그 확인
- 배포 완료 후 프로덕션 URL 접속 테스트

### 3. 배포 후 확인
- [ ] 프로덕션 도메인 접속 확인
- [ ] 관리자 로그인 테스트
- [ ] 주요 기능 동작 확인
- [ ] 에러 로그 확인

---

## 📝 참고 사항

### SAMPLE-MED-001 상품 정보
- **상품코드**: SAMPLE-MED-001
- **크루즈라인**: Celebrity Cruises
- **선박명**: Celebrity Edge
- **패키지명**: 바르셀로나-마르세유-제노바-나폴리-바르셀로나 7박 8일
- **여행기간**: 7박 8일
- **지니팩**: 예 (3일 체험용)
- **방문국가**: 스페인, 프랑스, 이탈리아
- **상품 ID**: 65

### 관리자 계정 정보
- **이름**: 모니카
- **전화번호**: 01024958013
- **비밀번호**: 0313
- **role**: admin

---

## ⚠️ 주의 사항

1. **재미나이 API 키**: `GEMINI_API_KEY` 환경 변수를 재미나이 API 키(`AIzaSyC7DeIRD9tvdBK81_MBRNv729Gh1uPxHM4`)로 업데이트해야 합니다.
2. **도메인 설정**: Vercel에서 도메인(`cruisedot.co.kr`)을 연결한 후 `NEXT_PUBLIC_BASE_URL` 환경 변수를 `https://cruisedot.co.kr`로 업데이트해야 합니다.
3. **환경 변수**: Production 환경 변수가 올바르게 설정되어 있는지 확인하세요.

---

## 완료 후 다음 단계

1. 재미나이 API 연결 상태 확인 및 필요 시 구현
2. 도메인 설정 확인 및 업데이트
3. 배포 실행
4. 배포 후 기능 테스트

