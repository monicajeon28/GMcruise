# ìµœì¢… ë°°í¬ ê°€ì´ë“œ - Vercel Function í¬ê¸° ë¬¸ì œ

## ğŸ¯ í˜„ì¬ ìƒí™©

### ë°œìƒí•œ ì—ëŸ¬ ì§„í–‰ ìƒí™©:
1. âŒ **ì²« ë²ˆì§¸ ì‹œë„:** 456MB â†’ 300MB ì œí•œ ì´ˆê³¼
2. âŒ **ë‘ ë²ˆì§¸ ì‹œë„:** 250MB+ â†’ 250MB ì œí•œ ì´ˆê³¼
3. âœ… **ì„¸ ë²ˆì§¸ ì‹œë„ (í˜„ì¬):** ê°•í™”ëœ ìµœì í™” ì ìš©

---

## ğŸ”§ ì ìš©í•œ ìµœì í™” (ìµœì¢… ë²„ì „)

### 1. outputFileTracingExcludes (ëŒ€í­ ê°•í™”)

ì œì™¸ëœ íŒŒì¼ ì¹´í…Œê³ ë¦¬:

#### Node.js ë°”ì´ë„ˆë¦¬ (ì•½ 200MB)
- @swc/core ëª¨ë“  í”Œë«í¼
- @esbuild ì „ì²´
- @next/swc ëª¨ë“  í”Œë«í¼

#### ë¹Œë“œ ë„êµ¬ (ì•½ 80MB)
- webpack
- terser
- prettier
- eslint
- typescript

#### ì •ì  íŒŒì¼ (ì•½ 150MB)
- public/videos/**
- public/í¬ë£¨ì¦ˆì •ë³´ì‚¬ì§„/**
- public/í¬ë£¨ì¦ˆì‚¬ì§„/**
- public/audio/**

#### ê°œë°œ íŒŒì¼ (ì•½ 20MB)
- scripts/**
- **/*.md
- docs/**
- ëª¨ë“  í…ŒìŠ¤íŠ¸ íŒŒì¼

### 2. serverExternalPackages
```javascript
[
  '@prisma/client',     // ë„¤ì´í‹°ë¸Œ ë°”ì´ë„ˆë¦¬
  '@node-rs/argon2',    // ë„¤ì´í‹°ë¸Œ ë°”ì´ë„ˆë¦¬
  'sharp',              // ì´ë¯¸ì§€ ì²˜ë¦¬
  'canvas',             // Canvas API
]
```

### 3. modularizeImports
```javascript
{
  'react-icons': {
    transform: 'react-icons/{{member}}',
  },
  'lodash': {
    transform: 'lodash/{{member}}',
  },
}
```

**ì˜ˆìƒ íš¨ê³¼:** ë¼ì´ë¸ŒëŸ¬ë¦¬ ì „ì²´ê°€ ì•„ë‹Œ í•„ìš”í•œ ë¶€ë¶„ë§Œ ì„í¬íŠ¸

---

## ğŸ“Š ì˜ˆìƒ í¬ê¸° ê°ì†Œ

### ì´ ì œì™¸ëœ íŒŒì¼:
- Node.js ë°”ì´ë„ˆë¦¬: ~200MB
- ë¹Œë“œ ë„êµ¬: ~80MB
- ì •ì  íŒŒì¼: ~150MB
- ê°œë°œ íŒŒì¼: ~20MB
- **ì´ ì˜ˆìƒ ê°ì†Œ: ~450MB**

### ìµœì¢… ì˜ˆìƒ í¬ê¸°:
**ì›ë³¸:** 456MB
**ì œì™¸ í›„:** ì•½ **100-150MB** âœ…

---

## ğŸš€ ë°°í¬ ëª¨ë‹ˆí„°ë§

### Vercel ëŒ€ì‹œë³´ë“œ í™•ì¸:

1. **Deployments íƒ­**
   - Building... ì§„í–‰ ìƒí™©
   - ì•½ 5-7ë¶„ ì†Œìš”

2. **Functions íƒ­** (ë°°í¬ ì™„ë£Œ í›„)
   - ê° í•¨ìˆ˜ì˜ í¬ê¸° í™•ì¸
   - **ëª©í‘œ: ëª¨ë‘ 250MB ì´í•˜**

3. **ë°°í¬ ë¡œê·¸**
   - ì—ëŸ¬ ì—†ì´ ì™„ë£Œë˜ëŠ”ì§€ í™•ì¸
   - "âœ“ Generating static pages" ë©”ì‹œì§€

---

## âš ï¸ ë§Œì•½ ì—¬ì „íˆ ì‹¤íŒ¨í•œë‹¤ë©´

### Plan B: Edge Runtime ì‚¬ìš©

ê°€ì¥ í° API ë¼ìš°íŠ¸ë“¤ì„ Edge Runtimeìœ¼ë¡œ ì „í™˜:

```typescript
// app/api/admin/affiliate/contracts/[contractId]/approve/route.ts
export const runtime = 'edge';
export const dynamic = 'force-dynamic';
```

**ì¥ì :**
- í¬ê¸° ì œí•œ: 1MB (í›¨ì”¬ ì—„ê²©í•˜ì§€ë§Œ ë²ˆë“¤ í¬ê¸°ê°€ ìë™ìœ¼ë¡œ ì‘ì•„ì§)
- ë” ë¹ ë¥¸ ì‘ë‹µ ì‹œê°„
- ê¸€ë¡œë²Œ ë°°í¬

**ë‹¨ì :**
- Node.js API ì¼ë¶€ ì‚¬ìš© ë¶ˆê°€
- Prisma ì‚¬ìš© ì‹œ íŠ¹ë³„í•œ ì„¤ì • í•„ìš”

### Plan C: Vercel Pro í”Œëœ ê³ ë ¤

ë¬´ë£Œ í”Œëœ ì œí•œ:
- Serverless Function: 250MB

Pro í”Œëœ ($20/ì›”):
- Serverless Function: 300MB

---

## âœ… ë°°í¬ ì™„ë£Œ í›„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### 1. Vercelì—ì„œ í™•ì¸
- [ ] ë°°í¬ ìƒíƒœ: Ready (ë…¹ìƒ‰)
- [ ] Functions íƒ­: ëª¨ë“  í•¨ìˆ˜ < 250MB
- [ ] ë¡œê·¸: ì—ëŸ¬ ì—†ìŒ

### 2. ì›¹ì‚¬ì´íŠ¸ í…ŒìŠ¤íŠ¸
- [ ] ë©”ì¸ í˜ì´ì§€ ë¡œë“œ
- [ ] íˆì–´ë¡œ ë¹„ë””ì˜¤ ì¬ìƒ
- [ ] ìœ íŠœë¸Œ Shorts
- [ ] ìœ íŠœë¸Œ Videos
- [ ] ì»¤ë®¤ë‹ˆí‹° ì„¹ì…˜
- [ ] ê´€ë¦¬ì í˜ì´ì§€ (/admin)

### 3. API í…ŒìŠ¤íŠ¸
- [ ] /api/public/youtube/shorts
- [ ] /api/public/youtube/videos
- [ ] /api/community/posts
- [ ] /api/admin/... (ê´€ë¦¬ì API)

### 4. F12 ê°œë°œì ë„êµ¬
- [ ] Console: ì—ëŸ¬ ì—†ìŒ
- [ ] Network: API 200 OK
- [ ] ì •ì  íŒŒì¼ ë¡œë“œ ì„±ê³µ

---

## ğŸ“ ë””ë²„ê¹… ì •ë³´ ìˆ˜ì§‘ (ì‹¤íŒ¨ ì‹œ)

ë§Œì•½ ì—¬ì „íˆ ì‹¤íŒ¨í•˜ë©´ ë‹¤ìŒ ì •ë³´ë¥¼ í™•ì¸:

### Vercel ë°°í¬ ë¡œê·¸:
```
Error: A Serverless Function has exceeded the unzipped maximum size
```

ì–´ë–¤ í•¨ìˆ˜ê°€ ë¬¸ì œì¸ì§€ í™•ì¸:
```
Failed to process build result for "api/..."
The Vercel Function "api/..." is XXXmb
```

### í•´ê²° ìˆœì„œ:
1. ë¬¸ì œ í•¨ìˆ˜ ì‹ë³„
2. í•´ë‹¹ í•¨ìˆ˜ë§Œ Edge Runtimeìœ¼ë¡œ ì „í™˜
3. ë˜ëŠ” í•´ë‹¹ í•¨ìˆ˜ ë¶„í• 

---

## ğŸŠ ì„±ê³µ ì˜ˆìƒ ì‹œë‚˜ë¦¬ì˜¤

ë°°í¬ê°€ ì„±ê³µí•˜ë©´:
- âœ… ëª¨ë“  API ë¼ìš°íŠ¸ ì •ìƒ ì‘ë™
- âœ… ìœ íŠœë¸Œ API ì •ìƒ í‘œì‹œ
- âœ… ì»¤ë®¤ë‹ˆí‹° ì •ìƒ í‘œì‹œ
- âœ… ë™ì˜ìƒ/ì´ë¯¸ì§€ ì •ìƒ ë¡œë“œ
- âœ… ê´€ë¦¬ì ê¸°ëŠ¥ ì •ìƒ ì‘ë™

**www.cruisedot.co.kr ì™„ë²½ ì‘ë™!** ğŸš€

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

1. **5-7ë¶„ ê¸°ë‹¤ë¦¬ê¸°** - Vercel ë°°í¬ ì§„í–‰ ì¤‘
2. **ë°°í¬ ì™„ë£Œ í™•ì¸** - Vercel ëŒ€ì‹œë³´ë“œ
3. **ì„±ê³µ ì‹œ**: ì›¹ì‚¬ì´íŠ¸ í…ŒìŠ¤íŠ¸
4. **ì‹¤íŒ¨ ì‹œ**: ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸í•˜ê³  Plan B ì§„í–‰

---

ë°°í¬ ê²°ê³¼ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”! ğŸš€
