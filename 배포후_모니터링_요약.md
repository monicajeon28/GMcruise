# 배포 후 모니터링 요약

> **작성일**: 2025년 1월 28일  
> **상태**: 배포 완료 후 즉시 확인 사항

---

## 🚀 즉시 확인 사항 (5분 내)

### 1. Vercel 배포 상태 확인
1. **Vercel 대시보드 접속**: https://vercel.com/dashboard
2. **프로젝트 선택**: cruise-guide (또는 해당 프로젝트명)
3. **최신 배포 확인**:
   - ✅ 성공 (초록색) → 정상
   - ❌ 실패 (빨간색) → 빌드 로그 확인 필요
4. **배포 URL 접속**: 배포된 사이트가 정상적으로 로드되는지 확인

---

## 📋 필수 환경 변수 확인 (Vercel)

### Vercel에서 확인하는 방법
1. **Vercel 대시보드** > 프로젝트 > **Settings** > **Environment Variables**
2. 다음 환경 변수가 설정되어 있는지 확인:

#### 필수 환경 변수
- ✅ `DATABASE_URL` - PostgreSQL 연결 문자열
- ✅ `GEMINI_API_KEY` - Google Gemini API 키
- ✅ `NEXT_PUBLIC_BASE_URL` - 기본 URL

#### 결제 시스템 (결제 기능 사용 시)
- ✅ `PG_SIGNKEY` / `PG_SIGNKEY_NON_AUTH`
- ✅ `PG_MID_AUTH` / `PG_MID_NON_AUTH`
- ✅ `PG_FIELD_ENCRYPT_IV` / `PG_FIELD_ENCRYPT_IV_NON_AUTH`
- ✅ `PG_FIELD_ENCRYPT_KEY` / `PG_FIELD_ENCRYPT_KEY_NON_AUTH`
- ✅ `NEXT_PUBLIC_WELCOME_PAY_URL` / `WELCOME_PAY_URL`

#### 구글 드라이브 백업 (자동 백업 사용 시)
- ✅ `GOOGLE_SERVICE_ACCOUNT_EMAIL`
- ✅ `GOOGLE_DRIVE_SERVICE_ACCOUNT_PRIVATE_KEY`
- ✅ `GOOGLE_DRIVE_SHARED_DRIVE_ID`

#### Cron Job 보안
- ✅ `CRON_SECRET` - Cron Job 인증 비밀 키

---

## 🧪 주요 기능 빠른 테스트 (10분)

### 1. 로그인 테스트
- [ ] 배포된 사이트 접속
- [ ] 로그인 페이지 접속 (`/login`)
- [ ] 테스트 로그인 시도 (비밀번호: 3800)
- [ ] 로그인 성공 확인

### 2. AI 채팅 테스트
- [ ] AI 채팅 페이지 접속 (`/chat`)
- [ ] 간단한 질문 입력 (예: "크루즈 여행 준비물은?")
- [ ] AI 응답 확인
- [ ] 스트리밍 응답 동작 확인

### 3. 체크리스트 테스트
- [ ] 체크리스트 페이지 접속 (`/checklist-test`)
- [ ] 항목 추가 테스트
- [ ] 항목 완료 체크 테스트
- [ ] DB 연동 확인 (페이지 새로고침 후 데이터 유지 확인)

### 4. 관리자 페이지 테스트
- [ ] 관리자 로그인 페이지 접속 (`/admin/login`)
- [ ] 관리자 로그인 시도
- [ ] 관리자 대시보드 접속 확인

---

## 📊 에러 로그 확인 (5분)

### Vercel 로그 확인 방법
1. **Vercel 대시보드** > 프로젝트 > **Logs** 탭
2. **최근 24시간** 로그 확인
3. **에러 필터링**: 에러 레벨만 확인

### 확인 사항
- [ ] 에러 로그 없음 → ✅ 정상
- [ ] 에러 로그 있음 → 에러 내용 확인 및 수정 필요

### 주요 에러 유형
- **타입 에러**: 런타임 에러 가능성 (모니터링 필요)
- **데이터베이스 연결 에러**: `DATABASE_URL` 확인
- **API 키 에러**: `GEMINI_API_KEY` 확인
- **결제 시스템 에러**: 결제 관련 환경 변수 확인

---

## 🔄 구글 드라이브 백업 확인

### Cron Job 스케줄 확인
1. **Vercel 대시보드** > 프로젝트 > **Settings** > **Cron Jobs**
2. 다음 Cron Job이 설정되어 있는지 확인:
   - `/api/cron/database-backup`: `0 3 * * *` (UTC 오전 3시 = KST 오전 12시)

### 백업 실행 확인
- [ ] 매일 오전 12시 (한국 시간) 자동 실행 확인
- [ ] 구글 드라이브에 백업 파일 생성 확인
- [ ] 백업 폴더 구조 확인: `DB_Backup_[월]` > `Backup_[날짜]`

### 수동 백업 테스트 (선택사항)
```bash
# 수동 백업 API 호출 (Vercel 환경에서)
curl -X GET "https://your-domain.vercel.app/api/cron/database-backup" \
  -H "Authorization: Bearer YOUR_CRON_SECRET"
```

---

## ⚠️ 문제 발생 시 대응

### 배포 실패
1. **Vercel 빌드 로그 확인**
2. **환경 변수 설정 확인**
3. **타입 에러 확인** (필요 시 `ignoreBuildErrors: false`로 변경)
4. **재배포 시도**

### 런타임 에러
1. **Vercel 로그에서 에러 확인**
2. **에러 발생 위치 파악**
3. **즉시 수정 및 재배포**

### 데이터베이스 연결 실패
1. **`DATABASE_URL` 환경 변수 확인**
2. **데이터베이스 서버 상태 확인**
3. **연결 권한 확인**

### AI 기능 에러
1. **`GEMINI_API_KEY` 환경 변수 확인**
2. **API 키 유효성 확인**
3. **API 할당량 확인**

---

## 📅 모니터링 일정

### 매일 확인 (5분)
- [ ] Vercel 로그 확인 (에러 발생 여부)
- [ ] 주요 기능 동작 확인
- [ ] 구글 드라이브 백업 실행 확인 (매일 오전 12시)

### 주간 확인 (30분)
- [ ] 사용자 피드백 수집
- [ ] 성능 지표 확인
- [ ] 에러 로그 분석
- [ ] 데이터베이스 백업 확인

---

## ✅ 체크리스트 완료 기준

### 필수 확인 사항
- [x] Vercel 배포 성공
- [ ] 모든 필수 환경 변수 설정 완료
- [ ] 데이터베이스 연결 확인
- [ ] 주요 기능 동작 확인
- [ ] 에러 로그 확인 (에러 없음)

### 권장 확인 사항
- [ ] 구글 드라이브 백업 동작 확인
- [ ] 성능 모니터링 시작
- [ ] 사용자 피드백 수집 시작

---

## 📝 참고 문서

- **상세 체크리스트**: `배포후_모니터링_체크리스트.md`
- **다음 작업 가이드**: `배포후_다음작업_가이드.md`
- **배포 완료 리포트**: `배포_완료_최종_수정.md`

---

**작성자**: AI Assistant  
**상태**: 배포 완료, 모니터링 단계  
**다음 단계**: Vercel 배포 상태 확인 및 환경 변수 설정 확인

