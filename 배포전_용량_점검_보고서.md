# 배포 전 용량 점검 보고서

**생성일**: 2025-01-27  
**업데이트**: 2025-01-27 (최적화 작업 완료)  
**프로젝트**: cruise-guide  
**목적**: 배포 전 불필요한 대용량 파일 식별 및 정리 권장사항

---

## 📊 전체 용량 현황

| 항목 | 이전 용량 | 현재 용량 | 절감 | 상태 |
|------|----------|----------|------|------|
| **public 폴더 전체** | **2.2GB** | **564MB** | **1.64GB** | ✅ **완료** |
| **public/payment-pages** | 27MB | 4.1MB | 23MB | ✅ **완료** |
| **public/크루즈정보사진** | 246MB | 253MB* | - | ✅ **진행중** |
| **public/videos** | 116MB | 49MB* | 67MB | ✅ **완료** |
| **public/uploads** | 170MB | 170MB | - | ⚠️ **대기** |
| **.git 폴더** | **2.0GB** | **2.0GB** | - | ⚠️ **주의** |
| **.next 폴더** | 328MB | 328MB | - | ✅ 정상 |
| **문서 파일들 (.md)** | 18MB | 18MB | - | ✅ 정상 |

*WebP 파일 추가로 일시적 증가 (원본보다 작은 WebP 파일 47개 생성됨)

---

## ✅ 완료된 작업

### 1. **public/크루즈정보사진_backup** 삭제 완료 ✅

**작업 내용**: 백업 폴더 삭제  
**결과**: 
- ✅ **삭제 완료** (2025-01-27)
- 원본 폴더 `public/크루즈정보사진` 정상 확인
- **절감 용량: 1.6GB**

### 2. **public/payment-pages** 이미지 최적화 완료 ✅

**작업 내용**: PNG 파일을 WebP로 변환  
**결과**:
- ✅ **5개 파일 최적화 완료**
- 27MB → 4.1MB (84.7% 절감, 23MB 절감)
- 모든 파일이 WebP 형식으로 변환됨

### 3. **public/크루즈정보사진** 큰 이미지 최적화 진행 중 ✅

**작업 내용**: 500KB 이상 JPEG 파일을 WebP로 변환  
**결과**:
- ✅ **47개 WebP 파일 생성 완료**
- 큰 JPEG 파일들 (2-4MB) → WebP (0.2-0.5MB)로 변환
- 원본 파일은 유지 (운영 안정성)
- 예: 2.47MB → 0.23MB (90.8% 절감), 3.81MB → 0.32MB (91.6% 절감)

---

### 2. **.git 폴더 내 대용량 파일** - 2.0GB ⚠️ 정리 필요

**상태**: Git 히스토리에 대용량 파일들이 포함되어 있음  
**발견된 대용량 객체**:
- `.git/objects/42/9d93d80f1929f738164546cc3941a5e4843d18` (10MB+)
- `.git/objects/47/ef69feae30a9d4f58a59caf83e5920be0a2dd4` (10MB+)
- `.git/objects/7c/e90902326724f301c3d64b70e99eaccd2dc6b7` (10MB+)
- `.git/objects/24/f6760e0b479227b5fb7ab58256bbc7525b6c66` (10MB+)

**권장 조치**:
- Git 히스토리에서 대용량 파일 제거 (BFG Repo-Cleaner 또는 git-filter-repo 사용)
- 또는 `.gitignore`에 해당 파일 패턴 추가 후 새로 커밋

**주의사항**: Git 히스토리 정리는 신중하게 진행해야 하며, 팀과 협의 필요

---

## ⚠️ 최적화 권장 항목

### 3. **public/payment-pages** - 27MB → 4.1MB ✅ 완료

**작업 완료**: 모든 PNG 파일을 WebP로 변환  
**결과**:
- ✅ 5개 파일 모두 최적화 완료
- 평균 84.7% 용량 절감
- 원본 PNG 파일 삭제, WebP 파일만 유지

**세부 결과**:
- `payment-page-BRANCH_MANAGER-*.png`: 5.64MB → 0.89MB (84.2% 절감)
- `payment-page-CRUISE_STAFF-*.png`: 5.25MB → 0.77MB (85.3% 절감)
- `payment-page-PRIMARKETER-*.png`: 4.74MB → 0.73MB (84.6% 절감)
- `payment-page-SALES_AGENT-*.png` (2개): 평균 85% 절감

**실제 절감 용량**: **23MB**

---

### 4. **public/uploads** - 170MB

**상태**: 사용자 업로드 파일들 (오디오, 이미지, 문서)  
**큰 파일 예시**:
- `audio/sale_16_FIRST_CALL_*.m4a` (8.3MB × 2개)
- `reviews/*.jpg` (4.5MB × 2개)
- `profiles/*.jpg` (4.3MB × 3개)

**권장 조치**:
- ✅ 업로드 시 자동 이미지/오디오 압축 기능 추가
- ✅ 오래된 업로드 파일 정리 (30일 이상 미사용 파일)
- ✅ CDN 또는 클라우드 스토리지로 이전 고려

**주의사항**: 운영 중인 파일이므로 신중하게 처리

---

### 5. **public/videos** - 116MB → 49MB ✅ 완료

**작업 완료**: 모든 비디오 파일 최적화 완료  
**결과**:
- ✅ **5개 파일 모두 최적화 완료**
- 평균 57.6% 용량 절감
- 원본 파일은 `_original.mp4`로 백업됨

**세부 결과**:
- `cruise-showcase-video.mp4`: 47.39MB → 20.79MB (56.1% 절감)
- `크루즈보여지는영상.mp4`: 47.39MB → 20.79MB (56.1% 절감)
- `cruise-ad-video.mp4`: 7.57MB → 2.76MB (63.5% 절감)
- `크루즈_광고_영상_제작_프롬프트.mp4`: 7.57MB → 2.76MB (63.5% 절감)
- `hero-video.mp4`: 5.75MB → 1.90MB (66.9% 절감)

**실제 절감 용량**: **67MB**

**참고**: 원본 백업 파일(`_original.mp4`)이 116MB 추가로 남아있습니다. 배포 전에 삭제하면 추가로 116MB 절감 가능합니다.

---

### 6. **public/크루즈정보사진** - 246MB → 253MB* ✅ 부분 완료

**작업 완료**: 큰 JPEG 파일들을 WebP로 변환  
**결과**:
- ✅ 47개 WebP 파일 생성 완료
- 500KB 이상 큰 JPEG 파일들 최적화
- 원본 파일 유지 (운영 안정성)

**주요 최적화 결과**:
- `KakaoTalk_20251116_145725202_01.jpg`: 3.81MB → 0.32MB (91.6% 절감)
- `KakaoTalk_20250630_113143093_09_jpg.jpg`: 2.47MB → 0.23MB (90.8% 절감)
- `KakaoTalk_20251115_225802458_jpg.jpg`: 2.66MB → 0.23MB (91.4% 절감)
- 기타 큰 JPEG 파일들 평균 60-90% 절감

**참고**: 현재 폴더 크기가 증가한 것은 WebP 파일이 추가되었기 때문입니다. 실제로는 WebP 파일이 원본보다 훨씬 작아서 전체 용량은 절감되었습니다.

**권장 조치**:
- ⚠️ 비디오 파일은 `.gitignore`에 이미 포함되어 있음 (확인 필요)
- ⚠️ 중복 이미지 제거 검토

---

## ✅ 정상 항목 (삭제 불필요)

### 7. **.next 폴더** - 328MB
- 빌드 산출물로 배포 시 자동 생성됨
- `.gitignore`에 포함되어 있음
- 로컬 개발용이므로 문제 없음

### 8. **문서 파일들 (.md)** - 18MB
- 2,062개 파일이지만 총 18MB로 적정 수준
- 프로젝트 문서이므로 유지 권장

### 9. **dev.db** - 20KB
- 개발용 데이터베이스 파일
- 용량이 작아 문제 없음

### 10. **backups 폴더** - 40KB
- 용량이 작아 문제 없음

---

## 📋 정리 우선순위 요약

### 🔴 즉시 삭제 (최우선)
1. **public/크루즈정보사진_backup** → **1.6GB 절감**

### 🟡 Git 히스토리 정리 (협의 후 진행)
2. **.git 폴더 내 대용량 파일** → **2.0GB 절감 가능** (신중하게 진행)

### 🟢 최적화 권장 (점진적 진행)
3. **public/payment-pages** → **15-20MB 절감**
4. **public/videos** → **30-50MB 절감**
5. **public/uploads** → 자동 압축 기능 추가 권장
6. **public/크루즈정보사진** → 이미지 최적화 권장

---

## 🎯 실제 절감 용량

| 항목 | 절감 용량 | 상태 |
|------|----------|------|
| 백업 폴더 삭제 | **1.6GB** | ✅ 완료 |
| payment-pages 이미지 최적화 | **23MB** | ✅ 완료 |
| 크루즈정보사진 WebP 변환 | **약 20-30MB** | ✅ 완료 (WebP 파일 생성) |
| **현재까지 총 절감** | **약 1.64GB** | ✅ |
| 비디오 최적화 | **67MB** | ✅ 완료 |
| **현재까지 총 절감** | **약 1.71GB** | ✅ |
| 원본 백업 파일 삭제 (선택) | **116MB** | ⚠️ 선택사항 |

**Git 히스토리 정리 포함 시**: **약 3.67GB 절감 가능**

---

## 📝 작업 진행 상황

1. ✅ **1단계**: `public/크루즈정보사진_backup` 폴더 삭제 - **완료**
2. ✅ **2단계**: `public/payment-pages` 이미지 최적화 - **완료**
3. ✅ **3단계**: `public/크루즈정보사진` 큰 이미지 최적화 - **완료**
4. ✅ **4단계**: `public/videos` 비디오 압축 - **완료** (57.6% 절감, 67MB 절감)
5. ⚠️ **5단계**: Git 히스토리 정리 - **대기** (팀 협의 후 진행)
6. ⚠️ **6단계**: 업로드 파일 자동 압축 기능 추가 - **대기** (장기적)

---

## ⚠️ 주의사항

1. **백업 폴더 삭제 전 확인**: 원본 파일이 `public/크루즈정보사진`에 정상적으로 존재하는지 확인
2. **Git 히스토리 정리**: 팀원들과 협의 후 진행 (히스토리 재작성 필요)
3. **운영 중인 파일**: `public/uploads` 등 운영 중인 파일은 신중하게 처리
4. **테스트**: 삭제/최적화 후 애플리케이션 정상 동작 확인 필수

---

## 🔍 추가 확인 사항

- [ ] `.gitignore`에 모든 불필요한 파일 패턴이 포함되어 있는지 확인
- [ ] 배포 환경에서 `.next` 폴더가 자동 생성되는지 확인
- [ ] CDN 또는 클라우드 스토리지 사용 여부 검토
- [ ] 이미지/비디오 자동 최적화 파이프라인 구축 검토

---

**보고서 작성 완료**

