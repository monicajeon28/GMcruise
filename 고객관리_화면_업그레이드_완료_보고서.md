# ê³ ê° ê´€ë¦¬ í™”ë©´ ì—…ê·¸ë ˆì´ë“œ ì™„ë£Œ ë³´ê³ ì„œ

## âœ… ì‘ì—… ì™„ë£Œ

### ëª©í‘œ
íŒë§¤ì›, ëŒ€ë¦¬ì ì¥, ê´€ë¦¬ì íŒ¨ë„ì˜ ê³ ê° ê´€ë¦¬ í™”ë©´ì—ì„œ ë‘ ì‚¬ìš©ì íƒ€ì…ì„ ëª…í™•íˆ êµ¬ë¶„í•˜ì—¬ í‘œì‹œ

### êµ¬ë¶„ ê¸°ì¤€
1. **í¬ë£¨ì¦ˆê°€ì´ë“œ ì§€ë‹ˆ (ê²°ì œ ê³ ê°)**
   - `customerStatus: 'active'`
   - `customerSource: 'cruise-guide'`
   - ë¹„ë°€ë²ˆí˜¸: `3800`
   - í‘œì‹œ: **"í¬ë£¨ì¦ˆê°€ì´ë“œ ì§€ë‹ˆ (ê²°ì œ)"**

2. **í¬ë£¨ì¦ˆê°€ì´ë“œ ì§€ë‹ˆ 3ì¼ ì²´í—˜**
   - `customerStatus: 'test'`
   - `customerSource: 'test-guide'`
   - ë¹„ë°€ë²ˆí˜¸: `1101`
   - í‘œì‹œ: **"í¬ë£¨ì¦ˆê°€ì´ë“œ ì§€ë‹ˆ 3ì¼ ì²´í—˜"**

---

## ğŸ“ ìˆ˜ì •ëœ íŒŒì¼

### 1. `components/admin/CustomerTable.tsx`

#### ë³€ê²½ ì‚¬í•­
- **í…ŒìŠ¤íŠ¸ ê³ ê° ë”±ì§€ ê°œì„ ** (205-213ë²ˆ ì¤„):
  ```typescript
  // ë³€ê²½ ì „
  badges.push({ label: 'í…ŒìŠ¤íŠ¸ê°€ì´ë“œ', ... });
  
  // ë³€ê²½ í›„
  badges.push({ label: 'í¬ë£¨ì¦ˆê°€ì´ë“œ ì§€ë‹ˆ 3ì¼ ì²´í—˜', ... });
  ```
  - `customerStatus === 'test' && customerSource === 'test-guide'` ì¡°ê±´ ì¶”ê°€
  - ëª…í™•í•œ ë¼ë²¨ í‘œì‹œ

- **í¬ë£¨ì¦ˆê°€ì´ë“œ ê³ ê° ë”±ì§€ ê°œì„ ** (232-235ë²ˆ ì¤„):
  ```typescript
  // ë³€ê²½ ì „
  badges.push({ label: 'í¬ë£¨ì¦ˆê°€ì´ë“œ', ... });
  
  // ë³€ê²½ í›„
  badges.push({ label: 'í¬ë£¨ì¦ˆê°€ì´ë“œ ì§€ë‹ˆ (ê²°ì œ)', ... });
  ```
  - `customerStatus === 'active' && customerSource === 'cruise-guide'` ì¡°ê±´ ì¶”ê°€
  - ëª…í™•í•œ ë¼ë²¨ í‘œì‹œ

- **CustomerStatusBadgesì— customerSource ì „ë‹¬** (783-787ë²ˆ ì¤„):
  ```typescript
  <CustomerStatusBadges
    testModeStartedAt={customer.testModeStartedAt}
    customerStatus={customer.customerStatus}
    customerSource={customer.customerSource} // âœ… ì¶”ê°€
    mallUserId={customer.mallUserId}
  />
  ```

### 2. `components/CustomerStatusBadges.tsx`

#### ë³€ê²½ ì‚¬í•­
- **Propsì— customerSource ì¶”ê°€**:
  ```typescript
  interface CustomerStatusBadgesProps {
    customerSource?: string | null | undefined; // âœ… ì¶”ê°€
    // ...
  }
  ```

- **3ì¼ ì²´í—˜ íŒë‹¨ ë¡œì§ ê°œì„ **:
  ```typescript
  // ë³€ê²½ ì „
  const isTrialUser = !!testModeStartedAt;
  
  // ë³€ê²½ í›„
  const isTrialUser = !!testModeStartedAt || 
    (customerStatus === 'test' && customerSource === 'test-guide');
  ```

- **ê²°ì œ ê³ ê° íŒë‹¨ ë¡œì§ ê°œì„ **:
  ```typescript
  // ë³€ê²½ ì „
  const isRegularGenie = !testModeStartedAt && 
    (customerStatus === 'active' || customerStatus === 'package');
  
  // ë³€ê²½ í›„
  const isRegularGenie = !testModeStartedAt && 
    (customerStatus === 'active' || customerStatus === 'package') && 
    customerSource === 'cruise-guide';
  ```

- **ë¼ë²¨ ëª…í™•í™”**:
  - "3ì¼ ì²´í—˜" â†’ **"í¬ë£¨ì¦ˆê°€ì´ë“œ ì§€ë‹ˆ 3ì¼ ì²´í—˜"**
  - "í¬ë£¨ì¦ˆ ê°€ì´ë“œ" â†’ **"í¬ë£¨ì¦ˆê°€ì´ë“œ ì§€ë‹ˆ (ê²°ì œ)"**

### 3. `app/partner/[partnerId]/customers/PartnerCustomersClient.tsx`

#### ë³€ê²½ ì‚¬í•­
- **PartnerCustomer íƒ€ì…ì— customerSource ì¶”ê°€** (133ë²ˆ ì¤„):
  ```typescript
  customerSource?: string | null; // âœ… ì¶”ê°€
  ```

- **CustomerStatusBadgesì— customerSource ì „ë‹¬** (2ê³³):
  - 2235-2239ë²ˆ ì¤„
  - 2335-2339ë²ˆ ì¤„

---

## ğŸ”„ ìë™ ì—°ë™ í™•ì¸

### API ë ˆë²¨
- âœ… `app/api/admin/customers/route.ts`: `customerSource` í•„ë“œ ë°˜í™˜ (333ë²ˆ ì¤„)
- âœ… `app/api/partner/customers/route.ts`: `customerSource` í•„ë“œ ë°˜í™˜ (276, 289, 492ë²ˆ ì¤„)

### ë°ì´í„° íë¦„
1. **ë¡œê·¸ì¸ ì‹œ ìë™ ì„¤ì •**:
   - 3800 ë¹„ë°€ë²ˆí˜¸ â†’ `customerSource: 'cruise-guide'`
   - 1101 ë¹„ë°€ë²ˆí˜¸ â†’ `customerSource: 'test-guide'`

2. **ê³ ê° ê´€ë¦¬ í™”ë©´ í‘œì‹œ**:
   - APIì—ì„œ `customerSource` ë°˜í™˜
   - ì»´í¬ë„ŒíŠ¸ì—ì„œ `customerSource` ê¸°ë°˜ ëª…í™•í•œ ë¼ë²¨ í‘œì‹œ

---

## ğŸ“Š í‘œì‹œ ì˜ˆì‹œ

### ê´€ë¦¬ì íŒ¨ë„ (`/admin/customers`)
- **í¬ë£¨ì¦ˆê°€ì´ë“œ ì§€ë‹ˆ (ê²°ì œ)**: íŒŒë€ìƒ‰ ë”±ì§€
- **í¬ë£¨ì¦ˆê°€ì´ë“œ ì§€ë‹ˆ 3ì¼ ì²´í—˜**: ì£¼í™©ìƒ‰ ë”±ì§€

### ëŒ€ë¦¬ì ì¥/íŒë§¤ì› íŒ¨ë„ (`/partner/[partnerId]/customers`)
- **í¬ë£¨ì¦ˆê°€ì´ë“œ ì§€ë‹ˆ (ê²°ì œ)**: íŒŒë€ìƒ‰ ë”±ì§€
- **í¬ë£¨ì¦ˆê°€ì´ë“œ ì§€ë‹ˆ 3ì¼ ì²´í—˜**: ì£¼í™©ìƒ‰ ë”±ì§€

---

## âœ… ê²€ì¦ ì™„ë£Œ

1. âœ… ë¦°í„° ì˜¤ë¥˜ ì—†ìŒ
2. âœ… ëª¨ë“  ê³ ê° ê´€ë¦¬ í™”ë©´ì— ì ìš©
3. âœ… APIì—ì„œ ìë™ìœ¼ë¡œ `customerSource` ë°˜í™˜
4. âœ… ë‘ ì‚¬ìš©ì íƒ€ì… ëª…í™•íˆ êµ¬ë¶„ í‘œì‹œ
5. âœ… ì˜¤ë¥˜ ì—†ì´ ìë™ ì—°ë™

---

## ğŸ¯ ê²°ê³¼

ì´ì œ ëª¨ë“  ê³ ê° ê´€ë¦¬ í™”ë©´ì—ì„œ:
- **í¬ë£¨ì¦ˆê°€ì´ë“œ ì§€ë‹ˆ (ê²°ì œ ê³ ê°)**: ëª…í™•íˆ í‘œì‹œ
- **í¬ë£¨ì¦ˆê°€ì´ë“œ ì§€ë‹ˆ 3ì¼ ì²´í—˜**: ëª…í™•íˆ í‘œì‹œ
- ë‘ ì‚¬ìš©ì íƒ€ì…ì´ í˜¼ë™ ì—†ì´ êµ¬ë¶„ë¨
- ì˜¤ë¥˜ ì—†ì´ ìë™ìœ¼ë¡œ ì—°ë™ë¨

---

## ğŸ“ ì°¸ê³ ì‚¬í•­

- ëª¨ë“  ë³€ê²½ì‚¬í•­ì€ í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ ì§€
- ê¸°ì¡´ `customerType` ê¸°ë°˜ ë¡œì§ë„ ìœ ì§€ (ì´ì¤‘ ì²´í¬)
- `customerSource`ê°€ ì—†ì–´ë„ ê¸°ì¡´ ë¡œì§ìœ¼ë¡œ ë™ì‘

