# 📋 이미지 라이브러리 추가 요구사항 답변
**작성일**: 2025-11-23  
**상태**: 요구사항 분석 완료, 구현 가능 여부 확인

---

## 1. 판매원/점장 공유 링크 ✅ **완전히 가능합니다!**

### 요구사항
- 관리자만이 아닌 판매원, 점장도 사용 가능
- 공유 링크로 접근
- 마케팅, 영업에 활용

### 답변: ✅ **가능합니다!**

**구현 방법**:
1. **공유 링크 생성**
   - `/admin/images/shared/[token]` 형태의 공유 링크
   - 토큰 기반 접근 제어
   - 만료 시간 설정 가능

2. **권한 설정**
   - 판매원/점장은 이미지 업로드 및 사용만 가능
   - 관리자는 모든 권한 (삭제, 폴더 관리 등)

3. **접근 제어**
   - 파트너 프로필 기반 접근
   - 또는 공유 토큰 기반 접근

**예시**:
```
관리자: /admin/images (전체 관리)
판매원/점장: /admin/images/shared/abc123xyz (공유 링크)
또는: /partner/images (파트너 전용 페이지)
```

---

## 2. 업로드 시 카테고리 선택 ✅ **가능합니다!**

### 요구사항
- 이미지 업로드 시 카테고리 선택
- 아무데나 넣지 말고 카테고리별로 정리

### 답변: ✅ **가능합니다!**

**구현 방법**:
1. **카테고리 목록**
   - 미리 정의된 카테고리 (크루즈사진, 객실, 식당, 엔터테인먼트 등)
   - 또는 사용자 정의 카테고리

2. **업로드 플로우**
   ```
   1. "이미지 업로드" 클릭
   2. 카테고리 선택 모달 표시
   - [크루즈사진] [객실] [식당] [엔터테인먼트] [기타]
   3. 카테고리 선택
   4. 이미지 파일 선택
   5. 업로드 (선택한 카테고리 폴더에 저장)
   ```

3. **폴더 구조**
   ```
   image-library/
     크루즈사진/
       코스타세레나/
       MSC/
     객실/
       스위트/
       발코니/
     식당/
     엔터테인먼트/
   ```

---

## 3. 워터마크 추가 (다운로드 시만) ✅ **가능합니다!**

### 요구사항
- 이미지에 크루즈닷 로고 불투명하게 추가
- 다운로드 시: 워터마크 있는 버전
- 코딩 사용 시: 워터마크 없는 원본

### 답변: ✅ **가능합니다!**

**구현 방법**:
1. **이미지 저장 구조**
   ```
   image-library/
     크루즈사진/
       코스타세레나/
         객실1.jpg          # 원본 (코딩용)
         객실1.webp         # WebP 원본 (코딩용)
         객실1-watermark.jpg # 워터마크 버전 (다운로드용)
         객실1-watermark.webp # WebP 워터마크 버전
   ```

2. **워터마크 추가 로직**
   - Sharp 라이브러리로 워터마크 오버레이
   - 크루즈닷 로고 이미지 사용
   - 불투명도 조절 (예: 30-50%)

3. **사용 시나리오**
   - **코딩/코드 복사**: 원본 URL 사용 (워터마크 없음)
   - **다운로드**: 워터마크 버전 제공

**예시 코드**:
```typescript
// 워터마크 추가
const watermarked = await sharp(originalBuffer)
  .composite([{
    input: logoBuffer,
    gravity: 'southeast', // 우하단
    blend: 'over',
    opacity: 0.3 // 30% 불투명도
  }])
  .webp({ quality: 80 })
  .toBuffer();
```

---

## 4. 대리점장 대시보드 통합 관련 ⚠️ **부분적으로 가능**

### 요구사항
- 개인 고객관리: 분리 필요 (경쟁 관계)
- 개인몰: 분리 필요
- 개인결제: 분리 필요
- 그 외: 통합 가능

### 답변: ⚠️ **부분적으로 가능합니다!**

**분리해야 할 것 (경쟁 관계)**:
1. ✅ **개인 고객관리**: 완전 분리
   - 각 대리점장의 고객 목록은 독립적
   - 다른 대리점장의 고객 정보 접근 불가

2. ✅ **개인몰**: 완전 분리
   - 각 대리점장의 랜딩페이지 독립
   - 상품, 디자인 등 개별 관리

3. ✅ **개인결제**: 완전 분리
   - 각 대리점장의 결제 정보 독립
   - 수익, 정산 등 개별 관리

**통합 가능한 것**:
1. ✅ **이미지 라이브러리**: 공유 가능
   - 모든 대리점장이 사용할 수 있는 공통 이미지
   - 마케팅 자료 공유

2. ✅ **교육 자료**: 공유 가능
   - 크루즈 상품 정보
   - 판매 가이드

3. ✅ **통계/분석**: 집계 가능 (개인 정보 제외)
   - 전체 판매 통계 (개인 정보 제외)
   - 트렌드 분석

**구현 방법**:
```
대리점장 대시보드:
  ├─ 개인 고객관리 (완전 분리) ✅
  ├─ 개인몰 관리 (완전 분리) ✅
  ├─ 개인결제 관리 (완전 분리) ✅
  ├─ 이미지 라이브러리 (공유) ✅
  ├─ 교육 자료 (공유) ✅
  └─ 통계 (집계, 개인 정보 제외) ✅
```

---

## 📊 구현 우선순위

### 1순위: 카테고리 선택 기능 ⭐⭐⭐⭐⭐
- **작업**: 업로드 시 카테고리 선택 모달
- **효과**: 이미지 정리 효율성 향상
- **소요 시간**: 0.5일

### 2순위: 워터마크 추가 ⭐⭐⭐⭐
- **작업**: 다운로드용 워터마크 버전 생성
- **효과**: 불펌 방지
- **소요 시간**: 1일

### 3순위: 판매원/점장 공유 링크 ⭐⭐⭐⭐
- **작업**: 공유 링크 생성 및 권한 설정
- **효과**: 마케팅/영업 활용도 향상
- **소요 시간**: 1일

### 4순위: 대리점장 대시보드 통합 ⭐⭐⭐
- **작업**: 이미지 라이브러리 통합 (개인 정보는 분리)
- **효과**: 공통 자료 공유
- **소요 시간**: 1-2일

---

## ✅ 최종 답변 요약

| 요구사항 | 가능 여부 | 우선순위 |
|---------|----------|---------|
| 판매원/점장 공유 링크 | ✅ 가능 | ⭐⭐⭐⭐ |
| 카테고리 선택 | ✅ 가능 | ⭐⭐⭐⭐⭐ |
| 워터마크 추가 | ✅ 가능 | ⭐⭐⭐⭐ |
| 대리점장 통합 (부분) | ⚠️ 부분 가능 | ⭐⭐⭐ |

---

## 💡 추가 제안

### 워터마크 옵션
- 워터마크 위치: 우하단, 중앙, 전체 배경
- 불투명도: 10%, 30%, 50% 선택 가능
- 로고 크기: 작게, 보통, 크게

### 카테고리 관리
- 관리자가 카테고리 추가/삭제 가능
- 카테고리별 권한 설정 (누가 업로드 가능한지)

### 공유 링크 관리
- 링크 만료 시간 설정
- 다운로드 횟수 제한
- 특정 카테고리만 공유 가능

---

**결론**: 모든 요구사항이 구현 가능합니다! 🎉

**다음 단계**: 어떤 기능부터 구현할까요?










