# 🚀 배포 단계별 계획서

**작성일**: 2025-11-23  
**목적**: 배포 전 필수 작업과 2차/3차 개발 구분

---

## 📊 현재 완료된 작업 (1차 개발)

### ✅ 핵심 기능 완료
1. **마케팅/어필리에이트 기능 정리**
   - 중복 기능 삭제
   - 미사용 기능 정리
   - 메뉴 구조 개선

2. **수당 보고서 시스템**
   - 월별 수당 보고서 엑셀 다운로드
   - 본사/대리점장/판매원별 분리
   - 3.3% 원천징수 계산
   - 실수령액 계산
   - 판매원별 집계 기능

3. **APIS 데이터 관리**
   - APIS 엑셀 자동 생성
   - 여권 관리에서 다운로드 가능

4. **여권 만료 알람**
   - 6개월 전 만료 알람
   - 고객 관리에서 시각적 표시

5. **구글 드라이브 자동 백업**
   - 매일 새벽 3시 DB 백업 (14개 테이블)
   - 계약서 완료 시 문서 자동 백업
   - 폴더 구조 자동 생성

6. **지급명세서 시스템**
   - 월별 지급명세서 자동 생성
   - PDF 생성 (로고/도장 포함)
   - 매월 1일 자동 발송
   - 파트너 대시보드에서 확인 가능

7. **자동 프로필 생성**
   - 대리점장/판매원 ID 생성 시 자동 설정
   - 기본 어필리에이트 링크 생성
   - 고객 그룹 생성
   - SNS 프로필 페이지 생성

8. **문서 구글 드라이브 동기화**
   - 계약서 PDF 자동 저장
   - 신분증/통장사본 자동 저장
   - 서명 이미지 자동 저장
   - 수동 동기화 API

---

## 🎯 배포 전 필수 작업 (즉시 처리)

### 1. 환경 변수 확인 ✅ (완료)
- [x] 구글 드라이브 서비스 계정 설정
- [x] 공유 드라이브 ID 설정
- [ ] 프로덕션 환경 변수 확인 (Vercel 등)
- [ ] 데이터베이스 연결 확인
- [ ] 이메일 발송 설정 확인

### 2. 빌드 및 타입 체크
- [ ] `npm run build` 성공 확인
- [ ] `npm run typecheck` 에러 없음 확인
- [ ] `npm run lint` 경고 확인

### 3. 데이터베이스 마이그레이션
- [ ] Prisma 스키마 최신 상태 확인
- [ ] 프로덕션 DB 마이그레이션 계획
- [ ] 데이터 백업 계획

### 4. 핵심 기능 테스트
- [ ] 로그인/로그아웃
- [ ] 계약서 완료 → 구글 드라이브 백업 확인
- [ ] 수당 보고서 엑셀 다운로드
- [ ] APIS 엑셀 다운로드
- [ ] 지급명세서 생성 및 발송
- [ ] 여권 만료 알람 표시
- [ ] 관리자 패널 접근

### 5. 보안 체크
- [ ] 환경 변수 노출 확인 (.env 파일)
- [ ] API 키 하드코딩 확인
- [ ] 인증/인가 로직 확인
- [ ] Rate Limiting 작동 확인

### 6. 성능 체크
- [ ] 페이지 로딩 속도 (3초 이내)
- [ ] API 응답 시간 (1초 이내)
- [ ] 이미지 최적화 확인

---

## 🔄 2차 개발 (배포 후 1-2주)

### 우선순위 높음
1. **UI/UX 개선**
   - [ ] 관리자 패널 메뉴 구조 재정리
   - [ ] 고객 관리 네이밍 명확화
   - [ ] 대시보드 차트 개선
   - [ ] 모바일 반응형 개선

2. **기능 보완**
   - [ ] 마케팅 퍼널 상세 페이지 구현
   - [ ] 어필리에이트 링크/상품/환불 페이지 상세 확인 및 완성
   - [ ] Passport Request 알림 발송 기능 (SMS/알림톡)
   - [ ] 그룹문자 발송 기능 테스트 및 개선

3. **데이터 분석 강화**
   - [ ] 판매원별 상세 분석 리포트
   - [ ] 고객 이탈률 분석
   - [ ] 수익성 분석 대시보드

4. **자동화 개선**
   - [ ] 계약서 승인 자동화 로직 개선
   - [ ] 정산 자동화 스케줄 최적화
   - [ ] 알림 시스템 개선

---

## 🚀 3차 개발 (배포 후 1-2개월)

### 장기 개선 사항
1. **고급 기능**
   - [ ] AI 기반 고객 분석
   - [ ] 예측 분석 (매출 예측 등)
   - [ ] 자동 리포트 생성 및 이메일 발송
   - [ ] 다국어 지원

2. **통합 기능**
   - [ ] 외부 CRM 연동
   - [ ] 결제 시스템 고도화
   - [ ] SMS/알림톡 API 통합
   - [ ] 소셜 미디어 자동 포스팅

3. **성능 최적화**
   - [ ] 데이터베이스 쿼리 최적화
   - [ ] 캐싱 전략 개선
   - [ ] 이미지 CDN 도입
   - [ ] 서버리스 함수 최적화

4. **보안 강화**
   - [ ] 2단계 인증 (2FA)
   - [ ] 감사 로그 시스템
   - [ ] 데이터 암호화 강화
   - [ ] 보안 스캔 자동화

---

## 📋 배포 전 최종 체크리스트

### 즉시 확인 (오늘)
- [ ] **환경 변수 설정 완료**
  - [x] 구글 드라이브 설정 완료
  - [ ] 프로덕션 환경 변수 확인 필요

- [ ] **빌드 테스트**
  ```bash
  npm run build
  npm run typecheck
  npm run lint
  ```

- [ ] **핵심 기능 테스트**
  - 계약서 완료 → 구글 드라이브 확인
  - 수당 보고서 다운로드
  - 지급명세서 생성

### 배포 전 (1-2일 전)
- [ ] **데이터베이스 백업**
- [ ] **프로덕션 환경 변수 설정**
- [ ] **도메인 및 SSL 확인**
- [ ] **모니터링 도구 설정**

### 배포 직전 (배포 당일)
- [ ] **최종 빌드**
- [ ] **스모크 테스트** (주요 기능만 빠르게 확인)
- [ ] **롤백 계획 수립**

---

## 🎯 배포 우선순위

### Phase 1: 필수 기능 배포 (지금)
**목표**: 핵심 기능이 작동하는 안정적인 버전 배포

**포함 사항**:
- ✅ 완료된 모든 기능
- ✅ 구글 드라이브 자동 백업
- ✅ 수당/지급명세서 시스템
- ✅ 문서 관리 시스템

**예상 시간**: 1-2일

### Phase 2: 개선 및 보완 (1-2주 후)
**목표**: 사용자 경험 개선 및 기능 보완

**포함 사항**:
- UI/UX 개선
- 미완성 기능 완성
- 알림 시스템 개선

**예상 시간**: 1-2주

### Phase 3: 고급 기능 (1-2개월 후)
**목표**: 비즈니스 가치 향상

**포함 사항**:
- AI 분석
- 외부 시스템 연동
- 고급 자동화

**예상 시간**: 1-2개월

---

## ⚠️ 배포 전 주의사항

### 1. 데이터 백업
- **반드시** 배포 전 전체 데이터베이스 백업
- 구글 드라이브 백업이 이미 설정되어 있지만, 수동 백업도 권장

### 2. 환경 변수
- 프로덕션 환경 변수는 **절대** Git에 커밋하지 않기
- Vercel 등 배포 플랫폼에 직접 설정

### 3. 점진적 배포
- 전체 사용자에게 한 번에 배포하지 말고
- 소규모 테스트 그룹부터 시작
- 문제 없으면 점진적으로 확대

### 4. 모니터링
- 배포 후 즉시 에러 로그 확인
- 사용자 피드백 수집
- 성능 메트릭 모니터링

---

## 📞 배포 전 최종 확인 사항

### 개발팀에게 확인
1. [ ] 모든 핵심 기능이 테스트되었나요?
2. [ ] 환경 변수가 모두 설정되었나요?
3. [ ] 데이터베이스 마이그레이션이 준비되었나요?
4. [ ] 롤백 계획이 수립되었나요?

### 운영팀에게 확인
1. [ ] 배포 일정이 확정되었나요?
2. [ ] 사용자에게 공지할 사항이 있나요?
3. [ ] 모니터링 계획이 있나요?

---

## 🎉 배포 후 즉시 확인

### 배포 직후 (첫 1시간)
- [ ] 사이트 접속 확인
- [ ] 로그인/로그아웃 확인
- [ ] 주요 페이지 로딩 확인
- [ ] 에러 로그 확인

### 배포 후 24시간
- [ ] 사용자 피드백 수집
- [ ] 에러 발생률 확인
- [ ] 성능 메트릭 확인
- [ ] 구글 드라이브 백업 확인

---

## 📝 체크리스트 요약

### ✅ 배포 가능 조건
- [x] 핵심 기능 완료
- [x] 구글 드라이브 연동 완료
- [ ] 빌드 성공
- [ ] 환경 변수 설정
- [ ] 핵심 기능 테스트 완료

### 🔄 2차 개발로 미룰 항목
- UI/UX 개선
- 미완성 기능 완성
- 알림 시스템 개선
- 데이터 분석 강화

### 🚀 3차 개발로 미룰 항목
- AI 분석
- 외부 시스템 연동
- 고급 자동화
- 보안 강화

---

**다음 단계**: 빌드 테스트 및 환경 변수 확인 후 배포 진행! 🚀















