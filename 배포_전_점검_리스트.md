# ë°°í¬ ì „ ì ê²€ ë¦¬ìŠ¤íŠ¸

## âœ… ìš°ë¦¬ê°€ ì¶”ê°€/ìˆ˜ì •í•œ ë¶€ë¶„

### 1. ê³„ì•½ì„œ ìƒì„¸ ëª¨ë‹¬ ê¸°ëŠ¥ ì¶”ê°€
- âœ… ê³„ì•½ ì‹œì‘ì¼/ì¢…ë£Œì¼ í‘œì‹œ ë° ìˆ˜ì • ê¸°ëŠ¥
- âœ… ì‹¸ì¸ ë§í¬ ìƒì„±/ë³´ê¸°/ë³µì‚¬ ê¸°ëŠ¥
- âœ… íƒ€ì… ì •ì˜ ì—…ë°ì´íŠ¸ ì™„ë£Œ

### 2. ì‹¸ì¸ ë§í¬ ë°›ëŠ” í˜ì´ì§€
- âœ… `/affiliate/contract/sign?token=...` í˜ì´ì§€ ìƒì„±
- âœ… ê³„ì•½ì„œ ë‚´ìš© í‘œì‹œ
- âœ… ì„œëª… íŒ¨ë“œ ê¸°ëŠ¥
- âœ… ì„œëª… ì €ì¥ ê¸°ëŠ¥

### 3. API ì—”ë“œí¬ì¸íŠ¸
- âœ… `GET /api/admin/affiliate/contracts/[contractId]` - ê³„ì•½ì„œ ìƒì„¸ ì¡°íšŒ (ìƒˆ í•„ë“œ í¬í•¨)
- âœ… `PUT /api/admin/affiliate/contracts/[contractId]` - ê³„ì•½ì„œ ìˆ˜ì • (ì‹œì‘ì¼/ì¢…ë£Œì¼, ì‹¸ì¸ ë§í¬)
- âœ… `GET /api/affiliate/contract/sign?token=...` - ì‹¸ì¸ ë§í¬ë¡œ ê³„ì•½ì„œ ì¡°íšŒ
- âœ… `POST /api/affiliate/contract/sign?token=...` - ì‹¸ì¸ ì €ì¥

### 4. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
- âœ… `contractStartDate` í•„ë“œ ì¶”ê°€
- âœ… `contractEndDate` í•„ë“œ ì¶”ê°€
- âœ… `signatureLink` í•„ë“œ ì¶”ê°€
- âœ… `signatureLinkExpiresAt` í•„ë“œ ì¶”ê°€

### 5. ë¯¸ë“¤ì›¨ì–´
- âœ… `/affiliate/contract/sign` ê³µê°œ ê²½ë¡œ ì¶”ê°€

## âš ï¸ ë°œê²¬ëœ ë¬¸ì œ

### 1. íƒ€ì… ì—ëŸ¬ (ìš°ë¦¬ ì‘ì—…ê³¼ ë¬´ê´€)
- **íŒŒì¼**: `app/admin/landing-pages/[id]/edit/page.tsx`
- **ì—ëŸ¬**: 350ë²ˆì§¸ ì¤„, 3919ë²ˆì§¸ ì¤„
- **ìƒíƒœ**: ê¸°ì¡´ íŒŒì¼ì˜ ë¬¸ì œ

### 2. ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš”
- **í•„ìš”í•œ ì‘ì—…**: `contractStartDate`, `contractEndDate`, `signatureLink`, `signatureLinkExpiresAt` í•„ë“œë¥¼ DBì— ì¶”ê°€
- **ë°©ë²•**: 
  ```sql
  ALTER TABLE "AffiliateContract" 
  ADD COLUMN IF NOT EXISTS "contractStartDate" TIMESTAMP,
  ADD COLUMN IF NOT EXISTS "contractEndDate" TIMESTAMP,
  ADD COLUMN IF NOT EXISTS "signatureLink" TEXT,
  ADD COLUMN IF NOT EXISTS "signatureLinkExpiresAt" TIMESTAMP;
  ```

## âœ… í™•ì¸ ì™„ë£Œ

### 1. ì˜ì¡´ì„±
- âœ… `nanoid` íŒ¨í‚¤ì§€ ì„¤ì¹˜ë¨ (`^5.1.6`)
- âœ… ëª¨ë“  import ê²½ë¡œ ì •ìƒ

### 2. ê¸°ì¡´ ê¸°ëŠ¥ í™•ì¸
- âœ… PDF ì´ë©”ì¼ ì „ì†¡ ê¸°ëŠ¥ ê·¸ëŒ€ë¡œ ì‘ë™
- âœ… í•œê¸€ ê¹¨ì§ ë¬¸ì œ í•´ê²°ë¨ (UTF-8 + í•œê¸€ í°íŠ¸)
- âœ… ì„œëª… ì´ë¯¸ì§€ ì €ì¥ ì •ìƒ (base64 â†’ Buffer)

### 3. ë¦°í„°
- âœ… ìš°ë¦¬ê°€ ì¶”ê°€í•œ íŒŒì¼ë“¤ ë¦°í„° ì—ëŸ¬ ì—†ìŒ

## ğŸ“‹ ë°°í¬ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

### í•„ìˆ˜ ì‘ì—…
1. âš ï¸ ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ (ìœ„ SQL ì‹¤í–‰)
2. âš ï¸ íƒ€ì… ì—ëŸ¬ ìˆ˜ì • (ì„ íƒì‚¬í•­ - ìš°ë¦¬ ì‘ì—…ê³¼ ë¬´ê´€)
3. âœ… `prisma generate` ì‹¤í–‰ (ìë™í™”ë¨ - build ì‹œ)
4. âœ… ë¹Œë“œ í…ŒìŠ¤íŠ¸

### ì„ íƒ ì‘ì—…
- íƒ€ì… ì—ëŸ¬ ìˆ˜ì • (landing-pages íŒŒì¼)

## ğŸ”§ ë°°í¬ ìˆœì„œ

1. **ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜**
   ```bash
   # PostgreSQLì— ì§ì ‘ ì‹¤í–‰í•˜ê±°ë‚˜ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìƒì„±
   psql -d your_database -f migration.sql
   ```

2. **Prisma í´ë¼ì´ì–¸íŠ¸ ì¬ìƒì„±**
   ```bash
   npm run postinstall  # ë˜ëŠ” npx prisma generate
   ```

3. **ë¹Œë“œ í…ŒìŠ¤íŠ¸**
   ```bash
   npm run build
   ```

4. **ë°°í¬**


