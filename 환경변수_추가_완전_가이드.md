# 환경 변수 추가 완전 가이드 (차근차근)

> **작성일**: 2025년 1월 28일  
> **순서**: 1단계 → 2단계 → 3단계

---

## 📋 추가할 환경 변수 목록

1. **NEXT_PUBLIC_BASE_URL** = `https://www.cruisedot.co.kr`
2. **YOUTUBE_API_KEY** = `AIzaSyDscvNSjhrahZDH5JXxEpBpk0xBWlybCsM`
3. **DATABASE_URL** = (Neon에서 복사한 연결 문자열)

---

## 🎯 1단계: NEXT_PUBLIC_BASE_URL 추가

### 현재 화면에서

1. **Key 필드 정리**
   - 현재 "CLIENT_KEY..." 또는 다른 내용이 있을 수 있음
   - **전체 선택 (Ctrl+A 또는 Cmd+A) 후 삭제**
   - Key 필드를 완전히 비워야 함

2. **Key 필드에 정확히 입력**
   ```
   NEXT_PUBLIC_BASE_URL
   ```
   - 대소문자 정확히 입력
   - 공백 없이 입력
   - 오타 없이 입력

3. **Value 필드 정리**
   - 현재 "https://www.cruisedot.co.kr"가 있을 수 있음
   - 이 값이 맞다면 그대로 두기
   - 다른 값이 있다면 삭제

4. **Value 필드에 정확히 입력**
   ```
   https://www.cruisedot.co.kr
   ```
   - http://가 아닌 https://로 시작
   - 마지막에 슬래시(/) 없이 입력
   - 정확히 이 값으로 입력

5. **환경 (Environment) 드롭다운 확인**
   - "Production, Preview, and Development" 선택
   - 또는 "Production"만 선택 가능

6. **Save 버튼 클릭**
   - 에러 메시지가 사라지고 저장됨
   - "Environment Variable added successfully" 같은 메시지 확인

---

## 🎯 2단계: YOUTUBE_API_KEY 추가

### 1단계 완료 후

1. **"Add Another" 버튼 클릭**
   - 1단계 저장 후 나타나는 버튼
   - 클릭하면 새로운 Key/Value 입력 필드가 나타남

2. **Key 필드에 정확히 입력**
   ```
   YOUTUBE_API_KEY
   ```
   - 대소문자 정확히 입력
   - 공백 없이 입력

3. **Value 필드에 정확히 입력**
   ```
   AIzaSyDscvNSjhrahZDH5JXxEpBpk0xBWlybCsM
   ```
   - 정확히 이 값으로 입력
   - 앞뒤 공백 없이 입력

4. **환경 (Environment) 드롭다운 확인**
   - "Production, Preview, and Development" 선택

5. **Save 버튼 클릭**
   - 저장 완료 확인

---

## 🎯 3단계: DATABASE_URL 추가

### 2단계 완료 후

#### 먼저 Neon에서 연결 문자열 복사

1. **Vercel 대시보드에서 Storage 탭 클릭**
   - 상단 메뉴에서 "Storage" 클릭

2. **"cruisedot" 데이터베이스 클릭**
   - Storage 페이지에서 "cruisedot" (Neon - Free) 클릭

3. **.env.local 탭 확인**
   - Quickstart 섹션 아래에 있는 탭

4. **Show secret 버튼 클릭** (👁️ 아이콘)
   - `DATABASE_URL=*************` 옆의 눈 아이콘 클릭
   - 별표가 사라지고 실제 연결 문자열이 표시됨

5. **연결 문자열 복사**
   - `DATABASE_URL=` 뒤의 값만 복사
   - 예: `postgresql://neondb_owner:password@ep-xxx-xxx.us-east-2.aws.neon.tech/neondb?sslmode=require`
   - **중요**: `DATABASE_URL=` 부분은 제외하고 값만 복사

#### 환경 변수에 추가

1. **Settings > Environment Variables로 돌아가기**
   - 왼쪽 사이드바에서 "Settings" 클릭
   - "Environment Variables" 클릭

2. **"Add Another" 버튼 클릭**
   - 또는 "새로 만들기" 탭 선택

3. **Key 필드에 정확히 입력**
   ```
   DATABASE_URL
   ```
   - 대소문자 정확히 입력

4. **Value 필드에 붙여넣기**
   - Neon에서 복사한 연결 문자열 붙여넣기
   - 예: `postgresql://neondb_owner:password@ep-xxx-xxx.us-east-2.aws.neon.tech/neondb?sslmode=require`

5. **환경 (Environment) 드롭다운 확인**
   - "Production, Preview, and Development" 선택

6. **Save 버튼 클릭**
   - 저장 완료 확인

---

## ✅ 완료 후 확인

### 환경 변수 목록 확인

1. **저장 후 목록에서 확인**
   - 아래 환경 변수 목록에서 다음 3개가 보이는지 확인:
     - `NEXT_PUBLIC_BASE_URL`
     - `YOUTUBE_API_KEY`
     - `DATABASE_URL`
   - 값은 별표(****)로 마스킹되어 표시됨

2. **재배포 확인**
   - 환경 변수 변경 후 자동으로 재배포됩니다
   - 또는 수동으로 재배포:
     - **Deployments** 탭 이동
     - 최신 배포 옆 **⋯** 메뉴 클릭
     - **Redeploy** 선택

---

## 🧪 테스트 방법

### 배포 후 웹사이트 확인

1. **https://www.cruisedot.co.kr 접속**

2. **로딩 문제 해결 확인**
   - ✅ "Shorts를 불러오는 중..." → 유튜브 영상 표시
   - ✅ "영상을 불러오는 중..." → 유튜브 영상 표시
   - ✅ "상품을 불러오는 중..." → 상품 목록 표시
   - ✅ "커뮤니티 게시글을 불러오는 중..." → 게시글 표시

3. **API 직접 테스트**
   ```bash
   # 유튜브 API 테스트
   curl https://www.cruisedot.co.kr/api/public/youtube?maxResults=6
   
   # 상품 API 테스트
   curl https://www.cruisedot.co.kr/api/public/products?limit=1
   ```

---

## 📋 전체 체크리스트

### 1단계: NEXT_PUBLIC_BASE_URL
- [ ] Key 필드 비우기
- [ ] Key: `NEXT_PUBLIC_BASE_URL` 입력
- [ ] Value: `https://www.cruisedot.co.kr` 입력
- [ ] 환경 드롭다운 확인
- [ ] Save 클릭
- [ ] 저장 완료 확인

### 2단계: YOUTUBE_API_KEY
- [ ] "Add Another" 버튼 클릭
- [ ] Key: `YOUTUBE_API_KEY` 입력
- [ ] Value: `AIzaSyDscvNSjhrahZDH5JXxEpBpk0xBWlybCsM` 입력
- [ ] 환경 드롭다운 확인
- [ ] Save 클릭
- [ ] 저장 완료 확인

### 3단계: DATABASE_URL
- [ ] Storage > cruisedot 클릭
- [ ] .env.local 탭 확인
- [ ] Show secret 버튼 클릭
- [ ] 연결 문자열 복사
- [ ] Settings > Environment Variables 이동
- [ ] "Add Another" 버튼 클릭
- [ ] Key: `DATABASE_URL` 입력
- [ ] Value: 복사한 연결 문자열 붙여넣기
- [ ] 환경 드롭다운 확인
- [ ] Save 클릭
- [ ] 저장 완료 확인

### 최종 확인
- [ ] 환경 변수 목록에서 3개 모두 확인
- [ ] 재배포 확인
- [ ] 웹사이트 테스트
- [ ] 로딩 문제 해결 확인

---

## ⚠️ 주의사항

### Key 필드
- ✅ 정확한 이름 입력 (대소문자 구분)
- ✅ 공백 없이 입력
- ❌ 불완전한 이름 사용 금지

### Value 필드
- ✅ 정확한 값 입력
- ✅ 앞뒤 공백 제거
- ❌ 잘못된 값 입력 금지

### 순서
- ✅ 1단계 → 2단계 → 3단계 순서대로 진행
- ✅ 각 단계마다 Save 클릭하여 저장
- ✅ 저장 완료 확인 후 다음 단계 진행

---

## 💡 팁

### 한 번에 여러 개 추가하는 방법

1. **첫 번째 환경 변수 저장** (NEXT_PUBLIC_BASE_URL)
2. **"Add Another" 버튼 클릭**
3. **두 번째 환경 변수 입력** (YOUTUBE_API_KEY)
4. **"Add Another" 버튼 클릭**
5. **세 번째 환경 변수 입력** (DATABASE_URL)
6. **Save 버튼 클릭**
   - 세 환경 변수가 모두 저장됨

---

**작성자**: AI Assistant  
**상태**: 완전 가이드 작성 완료




