# 📋 어필리에이트 계약서 승인 가이드

## 🎯 계약서 승인 프로세스

### 1. 계약서 제출
- **대리점장 대시보드**: 계약서 보내기 완료 → `submitted` 상태로 저장
- **본사**: 계약서 작성 완료 → `submitted` 상태로 저장
- ⚠️ **중요**: 계약서 제출 시점에는 **아이디/비밀번호가 생성되지 않습니다**

### 2. 계약서 승인 (관리자만 가능)

#### 📍 관리자 패널 접근 경로
```
관리자 패널 → 어필리에이트 → 계약서 관리
URL: /admin/affiliate/contracts
```

#### 🔍 계약서 승인 방법
1. 관리자 패널에 로그인
2. 좌측 메뉴에서 **"어필리에이트"** 클릭
3. **"계약서 관리"** 메뉴 클릭
4. 상태 필터에서 **"제출됨"** 선택 (또는 전체에서 제출된 계약서 확인)
5. 승인할 계약서의 **"승인"** 버튼 클릭
6. 승인 완료 시 자동으로:
   - 사용자 계정 생성 (아이디: `boss1-홍길동` 또는 `user1-김철수` 형식)
   - 비밀번호: `1101`로 자동 설정
   - 유효기간: **60일** 자동 설정
   - 어필리에이트 프로필 자동 생성

### 3. 승인 후 결과
- ✅ 사용자 계정 자동 생성
- ✅ 아이디/비밀번호 자동 발급
- ✅ 어필리에이트 프로필 자동 생성
- ✅ 계약서 상태: `submitted` → `approved`
- ✅ 유효기간: 승인일로부터 **60일**

## 📝 계약서 상태

| 상태 | 설명 | 아이디/비밀번호 |
|------|------|----------------|
| `submitted` | 제출됨 (승인 대기) | ❌ 생성 안 됨 |
| `approved` | 승인됨 | ✅ 자동 생성 |
| `rejected` | 거부됨 | ❌ 생성 안 됨 |

## 🔐 승인 후 발급되는 정보

### 파트너 아이디 형식
- **대리점장**: `boss1-홍길동`, `boss2-김철수` ...
- **판매원**: `user1-이영희`, `user2-박민수` ...

### 비밀번호
- 기본 비밀번호: `1101`
- 파트너 모드 로그인 시 사용

### 유효기간
- 승인일로부터 **60일**
- 유효기간 정보는 사용자 계정의 `metadata.accountExpiresAt`에 저장됨

## ⚠️ 주의사항

1. **무분별한 아이디 생성 방지**: 계약서 제출만으로는 아이디가 생성되지 않으며, 반드시 관리자 승인 후에만 생성됩니다.

2. **승인 권한**: 관리자(`role: 'admin'`)만 계약서 승인 가능

3. **중복 방지**: 동일한 전화번호로 이미 제출된 계약서가 있으면 중복 제출 불가

4. **유효기간 관리**: 60일 후 계정 만료 시 재승인 또는 연장 필요

## 🔄 프로세스 요약

```
[대리점장/본사] 계약서 작성 → 제출 (submitted)
                    ↓
            [관리자] 계약서 확인
                    ↓
            [관리자] 승인 버튼 클릭
                    ↓
    ✅ 아이디/비밀번호 자동 생성
    ✅ 어필리에이트 프로필 자동 생성
    ✅ 유효기간 60일 설정
    ✅ 계약서 상태: approved
```

## 📞 문의
계약서 승인 관련 문의는 관리자에게 연락하세요.






