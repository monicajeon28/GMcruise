# 고객 기록 및 알림 시스템 사용 가이드

## 📍 기능 위치 및 사용 방법

### 1. 관리자 패널 (본사)

#### 📍 알림 종 위치
- **위치**: 관리자 패널 상단 헤더 오른쪽 상단
- **경로**: `/admin/*` 모든 페이지
- **표시**: 종 아이콘 (🔔) + 읽지 않은 알림 개수 (빨간 뱃지)

#### 📍 고객 기록 기능
- **위치**: 고객 목록 페이지 (`/admin/customers`)
- **사용 방법**:
  1. `/admin/customers` 접속
  2. 고객 목록에서 각 고객의 "관리" 컬럼 확인
  3. **"기록"** 버튼 클릭 (보라색 버튼)
  4. 모달에서 기록 작성
  5. "내부 기록" 체크박스로 내부 기록 여부 선택
  6. 기록 작성 후 자동으로 담당자들에게 알림 발송

#### 📍 알림 확인 방법
1. 헤더 오른쪽 상단의 **종 아이콘** 클릭
2. 읽지 않은 알림 목록 확인
3. 알림 클릭 시 관련 고객 상세 페이지로 이동
4. "모두 읽음" 버튼으로 모든 알림 읽음 처리

---

### 2. 대리점 대시보드

#### 📍 알림 종 위치
- **위치**: 대시보드 헤더 오른쪽 상단
- **경로**: `/partner/[partnerId]/dashboard`
- **표시**: 종 아이콘 (🔔) + 읽지 않은 알림 개수 (빨간 뱃지)
- **스타일**: 반투명 흰색 배경 (헤더와 조화)

#### 📍 고객 기록 기능
- **위치**: 고객 관리 페이지 (`/partner/[partnerId]/customers`)
- **사용 방법**:
  1. `/partner/[partnerId]/customers` 접속
  2. 고객 목록에서 각 고객의 "관리" 컬럼 확인
  3. **"기록"** 버튼 클릭
  4. 모달에서 기록 작성
  5. 기록 작성 시 자동으로 본사 및 담당 판매원에게 알림 발송

#### 📍 알림 확인 방법
1. 대시보드 헤더 오른쪽 상단의 **종 아이콘** 클릭
2. 읽지 않은 알림 목록 확인
3. 알림 클릭 시 관련 고객 상세 페이지로 이동

---

### 3. 판매원 대시보드

#### 📍 알림 종 위치
- **위치**: 대시보드 헤더 오른쪽 상단
- **경로**: `/partner/[partnerId]/dashboard`
- **표시**: 종 아이콘 (🔔) + 읽지 않은 알림 개수 (빨간 뱃지)
- **스타일**: 반투명 흰색 배경 (헤더와 조화)

#### 📍 고객 기록 기능
- **위치**: 고객 관리 페이지 (`/partner/[partnerId]/customers`)
- **사용 방법**:
  1. `/partner/[partnerId]/customers` 접속
  2. 고객 목록에서 각 고객의 "관리" 컬럼 확인
  3. **"기록"** 버튼 클릭
  4. 모달에서 기록 작성
  5. 기록 작성 시 자동으로 본사 및 담당 대리점장에게 알림 발송

#### 📍 알림 확인 방법
1. 대시보드 헤더 오른쪽 상단의 **종 아이콘** 클릭
2. 읽지 않은 알림 목록 확인
3. 알림 클릭 시 관련 고객 상세 페이지로 이동

---

## 🔔 알림 시스템 작동 방식

### 알림 발송 규칙

1. **고객 기록 작성 시**:
   - 본사 관리자: 항상 알림 받음
   - 담당 대리점장: 고객 소유권이 있는 경우 알림 받음
   - 담당 판매원: 고객 소유권이 있는 경우 알림 받음

2. **공지사항 발송 시**:
   - 본사가 전체 또는 특정 그룹에게 공지사항 발송
   - 대상: 전체 / 대리점장만 / 판매원만

### 알림 업데이트 주기

- **폴링 간격**: 30초마다 자동 업데이트
- **탭 비활성화 시**: 자동 중지 (서버 부하 최소화)
- **읽음 처리**: 읽은 알림은 다시 조회하지 않음

---

## 📝 고객 기록 작성 가이드

### 기록 작성 시 주의사항

1. **내부 기록 옵션**:
   - 체크 시: 다른 담당자에게만 공개 (본사, 대리점장, 판매원)
   - 미체크 시: 모든 담당자에게 공개

2. **기록 내용**:
   - 고객과의 대화 내용
   - 특이사항
   - 다음 행동 계획
   - 기타 참고사항

3. **자동 알림**:
   - 기록 작성 시 자동으로 담당자들에게 알림 발송
   - 별도 발송 작업 불필요

---

## 🚀 빠른 시작

### 관리자 패널
1. `/admin/customers` 접속
2. 고객 선택 → "기록" 버튼 클릭
3. 기록 작성 → 저장

### 대리점/판매원 대시보드
1. `/partner/[partnerId]/dashboard` 접속
2. 헤더 오른쪽 상단 종 아이콘 확인
3. `/partner/[partnerId]/customers` 접속
4. 고객 선택 → "기록" 버튼 클릭
5. 기록 작성 → 저장

---

## ❓ 문제 해결

### 알림 종이 보이지 않는 경우
1. 브라우저 새로고침 (F5 또는 Ctrl+R)
2. 캐시 삭제 후 재접속
3. 관리자 권한 확인

### 고객 기록 버튼이 보이지 않는 경우
1. 고객 목록 페이지 확인 (`/admin/customers` 또는 `/partner/[partnerId]/customers`)
2. "관리" 컬럼 확인
3. 브라우저 새로고침

### 알림이 오지 않는 경우
1. 알림 종 아이콘 클릭하여 알림 목록 확인
2. 고객 소유권 확인 (대리점장/판매원 연결 여부)
3. 30초 대기 후 다시 확인 (폴링 간격)

---

## 📞 문의

기능 사용 중 문제가 발생하면 관리자에게 문의하세요.

